Optimizer called with the following parameters:
{'focal_plane_mask': {'field_stop_radius': 14.5,
                      'grayscale': True,
                      'num_pix': 150,
                      'radius': 3.7},
 'image': {'bandwidth': 0.2,
           'contrast': 10,
           'iwa': 3.6,
           'num_wavelengths': 5,
           'owa': 14.0,
           'resolution': 2},
 'instrument': {'inst_name': 'USORT'},
 'lyot_stop': {'alignment_tolerance': 0,
               'filename': 'USORT/LS_USORT_circ_ID0000_OD0990_ovsamp16_N0128.fits',
               'num_lyot_stops': 1},
 'method': {'edge_width_for_prior': 2,
            'ending_scale': 1,
            'force_no_hermitian_symmetry': False,
            'force_no_x_mirror_symmetry': False,
            'force_no_y_mirror_symmetry': False,
            'initial_throughput_estimate': 1,
            'maximize_planet_throughput': True,
            'num_throughput_iterations': 2,
            'starting_scale': 1},
 'pupil': {'N': 128,
           'filename': 'USORT/TelAp_USORT_offaxis_ovsamp16_N0128.fits'},
 'solver': {'crossover': 0,
            'method': 2,
            'num_threads': 0}}

File organization:
{'analysis_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/analysis',
 'drivers_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/drivers',
 'input_files_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/masks',
 'log_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/logs',
 'solution_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/solutions',
 'survey_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36'}

Telescope pupil:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Lyot stop #0:
   Mirror symmetry in x: yes
Lyot stop #0:
   Mirror symmetry in y: yes

Complete APLC:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Starting optimization at scale 1 with 2726 variables and 2885 constraints.
Creating model...
Set parameter Username
Academic license - for non-commercial use only - expires 2024-10-25
Set parameter Crossover to value 0
Set parameter Method to value 2
Calculating and adding constraints...
Wavelength 1/5; Variable 1000/2726
Wavelength 1/5; Variable 2000/2726
Wavelength 2/5; Variable 1000/2726
Wavelength 2/5; Variable 2000/2726
Wavelength 3/5; Variable 1000/2726
Wavelength 3/5; Variable 2000/2726
Wavelength 4/5; Variable 1000/2726
Wavelength 4/5; Variable 2000/2726
Wavelength 5/5; Variable 1000/2726
Wavelength 5/5; Variable 2000/2726
Start optimization...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5770 rows, 2726 columns and 15729020 nonzeros
Model fingerprint: 0x10ef38ab
Coefficient statistics:
  Matrix range     [4e-12, 5e-04]
  Objective range  [2e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e-05, 1e-05]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 7.16s
Presolved: 2726 rows, 8496 columns, 15731746 nonzeros
Error: invalid user locale; possible fix is to set the system environment
       variable 'LC_ALL' to a valid locale (e.g., to 'C')
Ordering time: 0.07s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.58087130e+03  0.00000000e+00  0.00e+00 0.00e+00  9.74e-01    10s
   1   2.79354857e+03  5.07890994e+02  0.00e+00 1.85e-01  3.85e-01    11s
   2   1.69749341e+03  8.59297535e+02  0.00e+00 1.04e-01  1.72e-01    12s
   3   1.24236460e+03  8.82975938e+02  0.00e+00 6.82e-02  9.93e-02    13s
   4   1.04023769e+03  8.64399120e+02  0.00e+00 5.06e-02  6.63e-02    14s
   5   9.35807733e+02  8.36700210e+02  0.00e+00 3.75e-02  4.56e-02    14s
   6   8.61392722e+02  8.07968462e+02  0.00e+00 2.55e-02  2.88e-02    15s
   7   8.08962264e+02  7.82170138e+02  0.00e+00 1.60e-02  1.65e-02    16s
   8   7.83593912e+02  7.71753740e+02  0.00e+00 1.24e-02  1.14e-02    17s
   9   7.78541447e+02  7.64652732e+02  0.00e+00 1.01e-02  9.59e-03    18s
  10   7.66695591e+02  7.57397024e+02  0.00e+00 7.78e-03  7.04e-03    18s
  11   7.53495526e+02  7.50753524e+02  0.00e+00 5.77e-03  4.67e-03    19s
  12   7.44833880e+02  7.43100183e+02  0.00e+00 3.49e-03  2.75e-03    19s
  13   7.40353633e+02  7.40640860e+02  0.00e+00 2.84e-03  2.06e-03    20s
  14   7.37715997e+02  7.38349172e+02  0.00e+00 2.28e-03  1.62e-03    21s
  15   7.35520669e+02  7.35557399e+02  0.00e+00 1.62e-03  1.19e-03    22s
  16   7.33040381e+02  7.33700592e+02  0.00e+00 1.21e-03  8.28e-04    22s
  17   7.30859925e+02  7.31752595e+02  0.00e+00 7.74e-04  4.88e-04    23s
  18   7.29167627e+02  7.30983287e+02  0.00e+00 6.05e-04  2.84e-04    24s
  19   7.28755579e+02  7.30540833e+02  0.00e+00 5.10e-04  2.18e-04    25s
  20   7.28548819e+02  7.29797764e+02  0.00e+00 3.65e-04  1.59e-04    25s
  21   7.28345577e+02  7.29140915e+02  0.00e+00 2.33e-04  1.02e-04    26s
  22   7.28225293e+02  7.28829427e+02  0.00e+00 1.72e-04  7.45e-05    27s
  23   7.28140840e+02  7.28566593e+02  0.00e+00 1.22e-04  5.31e-05    27s
  24   7.28055438e+02  7.28282729e+02  0.00e+00 6.62e-05  2.95e-05    28s
  25   7.28015104e+02  7.28158907e+02  0.00e+00 4.38e-05  2.01e-05    29s
  26   7.27970308e+02  7.28033850e+02  0.00e+00 2.12e-05  1.03e-05    29s
  27   7.27937505e+02  7.27960245e+02  3.18e-07 7.75e-06  3.82e-06    30s
  28   7.27924203e+02  7.27935280e+02  1.21e-06 3.21e-06  1.44e-06    31s
  29   7.27919438e+02  7.27922675e+02  1.65e-06 9.22e-07  4.06e-07    32s
  30   7.27919458e+02  7.27922649e+02  2.33e-06 9.17e-07  4.05e-07    33s
  31   7.27919382e+02  7.27921626e+02  2.59e-06 7.27e-07  3.45e-07    34s
  32   7.27919359e+02  7.27920509e+02  2.97e-06 5.15e-07  2.20e-07    35s
  33   7.27919256e+02  7.27918320e+02  3.98e-06 9.94e-08  1.44e-07    36s
  34   7.27919140e+02  7.27917926e+02  3.58e-06 2.43e-08  1.22e-07    38s
  35   7.27918636e+02  7.27917837e+02  7.85e-06 6.44e-09  7.68e-08    39s
  36   7.27918287e+02  7.27917818e+02  8.06e-06 2.64e-09  4.66e-08    40s
  37   7.27918049e+02  7.27917807e+02  1.33e-05 2.41e-10  2.01e-08    41s
  38   7.27917893e+02  7.27917806e+02  1.43e-05 3.55e-13  1.05e-08    43s
  39   7.27917792e+02  7.27917806e+02  2.06e-05 2.17e-13  1.27e-10    44s
  40   7.27917681e+02  7.27917807e+02  2.82e-05 1.06e-12  1.20e-10    46s
  41   7.27917710e+02  7.27917807e+02  2.82e-05 9.61e-13  6.58e-11    48s
  42   7.27917636e+02  7.27917807e+02  7.14e-05 1.04e-12  3.54e-11    50s
  43   7.27917909e+02  7.27917807e+02  3.76e-05 2.64e-13  9.50e-12    50s
  44   7.27917783e+02  7.27917807e+02  2.62e-05 1.48e-12  5.68e-13    51s
  45   7.27917771e+02  7.27917807e+02  2.01e-05 1.14e-12  1.82e-13    52s
  46   7.27917782e+02  7.27917807e+02  1.37e-05 2.79e-13  2.83e-13    53s
  47   7.27917792e+02  7.27917807e+02  1.45e-05 1.08e-12  4.67e-14    54s
  48   7.27917765e+02  7.27917807e+02  1.70e-05 1.69e-12  6.54e-15    56s
  49   7.27917838e+02  7.27917807e+02  4.81e-05 5.21e-13  1.61e-13    56s
  50   7.27917924e+02  7.27917807e+02  4.70e-05 4.19e-13  1.23e-13    58s
  51   7.27917707e+02  7.27917807e+02  3.52e-05 3.67e-13  9.51e-15    58s
  52   7.27917948e+02  7.27917807e+02  2.16e-05 2.23e-13  4.33e-16    59s

Barrier performed 52 iterations in 58.94 seconds (29.47 work units)
Sub-optimal termination - objective 7.27919256e+02

Optimization finished!
Restarting optimization for throughput iteration 1...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5770 rows, 2726 columns and 15729020 nonzeros
Model fingerprint: 0xf76ae461
Coefficient statistics:
  Matrix range     [4e-12, 5e-04]
  Objective range  [2e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [3e-06, 3e-06]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 7.15s
Presolved: 2726 rows, 8496 columns, 15731746 nonzeros
Ordering time: 0.07s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.49532481e+03  0.00000000e+00  0.00e+00 0.00e+00  9.64e-01    11s
   1   2.72947333e+03  4.89714554e+02  0.00e+00 1.90e-01  3.91e-01    11s
   2   1.62169480e+03  8.35047825e+02  0.00e+00 1.04e-01  1.77e-01    12s
   3   1.14375529e+03  8.47429496e+02  0.00e+00 6.48e-02  1.00e-01    13s
   4   8.97399509e+02  8.24044743e+02  0.00e+00 5.08e-02  6.68e-02    14s
   5   8.03391901e+02  7.99961055e+02  0.00e+00 4.14e-02  5.04e-02    14s
   6   7.39362607e+02  7.73106510e+02  0.00e+00 3.20e-02  3.55e-02    15s
   7   7.33018156e+02  7.59401965e+02  0.00e+00 2.72e-02  3.04e-02    16s
   8   7.21260118e+02  7.50985127e+02  0.00e+00 2.41e-02  2.63e-02    17s
   9   7.14749787e+02  7.34884183e+02  0.00e+00 1.95e-02  2.14e-02    18s
  10   7.10072381e+02  7.24531600e+02  0.00e+00 1.66e-02  1.83e-02    18s
  11   6.94898965e+02  7.08317053e+02  0.00e+00 1.22e-02  1.25e-02    19s
  12   6.84844228e+02  6.96721047e+02  0.00e+00 8.77e-03  8.45e-03    20s
  13   6.78682322e+02  6.88256593e+02  0.00e+00 6.81e-03  6.14e-03    21s
  14   6.75766672e+02  6.83024226e+02  0.00e+00 5.57e-03  5.00e-03    21s
  15   6.72661937e+02  6.76891839e+02  0.00e+00 4.04e-03  3.69e-03    22s
  16   6.69248305e+02  6.74757364e+02  0.00e+00 3.58e-03  3.05e-03    23s
  17   6.66748142e+02  6.70287806e+02  0.00e+00 2.70e-03  2.35e-03    23s
  18   6.64496235e+02  6.66113786e+02  0.00e+00 1.93e-03  1.78e-03    24s
  19   6.60682156e+02  6.62632748e+02  0.00e+00 1.38e-03  1.18e-03    25s
  20   6.58358017e+02  6.60921567e+02  0.00e+00 1.12e-03  8.58e-04    25s
  21   6.56924107e+02  6.60216253e+02  0.00e+00 1.01e-03  6.78e-04    26s
  22   6.56067467e+02  6.59037522e+02  0.00e+00 8.33e-04  5.41e-04    27s
  23   6.55358013e+02  6.57821643e+02  0.00e+00 6.55e-04  4.16e-04    27s
  24   6.54465499e+02  6.56569658e+02  0.00e+00 4.73e-04  2.80e-04    28s
  25   6.53983610e+02  6.55798701e+02  0.00e+00 3.67e-04  2.10e-04    29s
  26   6.53793126e+02  6.55395938e+02  0.00e+00 3.16e-04  1.82e-04    29s
  27   6.53728268e+02  6.54989164e+02  0.00e+00 2.63e-04  1.60e-04    30s
  28   6.53570303e+02  6.54857852e+02  0.00e+00 2.46e-04  1.45e-04    31s
  29   6.53542198e+02  6.54596149e+02  0.00e+00 2.13e-04  1.31e-04    31s
  30   6.53453254e+02  6.54492663e+02  0.00e+00 2.01e-04  1.20e-04    32s
  31   6.53391088e+02  6.54391242e+02  0.00e+00 1.88e-04  1.12e-04    33s
  32   6.53355641e+02  6.54246368e+02  0.00e+00 1.71e-04  1.04e-04    34s
  33   6.53311602e+02  6.54132058e+02  0.00e+00 1.57e-04  9.68e-05    35s
  34   6.53126310e+02  6.53974456e+02  0.00e+00 1.41e-04  7.89e-05    35s
  35   6.53029612e+02  6.53775533e+02  0.00e+00 1.19e-04  6.52e-05    36s
  36   6.52894156e+02  6.53542563e+02  0.00e+00 9.38e-05  4.66e-05    37s
  37   6.52812894e+02  6.53334652e+02  0.00e+00 7.11e-05  3.31e-05    38s
  38   6.52793140e+02  6.53263791e+02  0.00e+00 6.33e-05  2.90e-05    39s
  39   6.52753362e+02  6.53039927e+02  0.00e+00 3.89e-05  1.81e-05    40s
  40   6.52744498e+02  6.52963292e+02  0.00e+00 3.07e-05  1.50e-05    41s
  41   6.52719053e+02  6.52913000e+02  0.00e+00 2.55e-05  1.15e-05    41s
  42   6.52705873e+02  6.52849807e+02  0.00e+00 1.90e-05  8.66e-06    42s
  43   6.52690811e+02  6.52776076e+02  0.00e+00 1.14e-05  5.32e-06    43s
  44   6.52681940e+02  6.52708894e+02  0.00e+00 4.47e-06  2.66e-06    43s
  45   6.52670775e+02  6.52682483e+02  1.26e-07 1.74e-06  9.25e-07    44s
  46   6.52667334e+02  6.52670446e+02  2.41e-07 4.78e-07  2.66e-07    45s
  47   6.52666179e+02  6.52667215e+02  1.63e-07 1.37e-07  6.37e-08    46s
  48   6.52666021e+02  6.52665947e+02  6.34e-08 3.59e-09  1.07e-08    48s
  49   6.52666022e+02  6.52665947e+02  7.70e-08 3.57e-09  1.07e-08    49s
  50   6.52666021e+02  6.52665895e+02  1.31e-07 3.24e-11  1.13e-08    51s
  51   6.52666019e+02  6.52665900e+02  2.87e-07 2.57e-11  1.07e-08    52s
  52   6.52666016e+02  6.52665913e+02  5.73e-07 5.23e-12  9.43e-09    53s
  53   6.52666014e+02  6.52665916e+02  7.78e-07 1.41e-12  8.97e-09    54s
  54   6.52666010e+02  6.52665917e+02  1.40e-06 3.40e-13  7.78e-09    55s
  55   6.52665994e+02  6.52665917e+02  2.21e-06 2.73e-13  6.22e-09    57s
  56   6.52665991e+02  6.52665917e+02  2.52e-06 2.61e-13  6.02e-09    58s
  57   6.52665960e+02  6.52665917e+02  4.17e-06 8.26e-13  3.58e-09    59s
  58   6.52665946e+02  6.52665917e+02  8.81e-06 3.88e-13  1.68e-09    60s
  59   6.52665916e+02  6.52665917e+02  9.82e-06 1.49e-12  9.82e-10    61s
  60   6.52665906e+02  6.52665917e+02  4.86e-06 3.33e-13  4.13e-10    62s
  61   6.52665910e+02  6.52665917e+02  8.55e-06 2.51e-13  1.40e-10    63s
  62   6.52665941e+02  6.52665917e+02  8.11e-06 9.88e-13  1.01e-10    64s
  63   6.52665956e+02  6.52665917e+02  1.73e-05 7.37e-13  3.30e-12    65s

Barrier performed 63 iterations in 64.98 seconds (30.40 work units)
Sub-optimal termination - objective 6.52666021e+02

/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/drivers/05_USORT_N128_FPM370M0150_IWA0360_OWA01400_C10_BW20_Nlam5_LS_IDc_ID0_OD_OD0_ls_90_ovsamp16_.py:102: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  dark_zone_mask = circular_aperture(img_owa * 2)(focal_grid) - circular_aperture(img_iwa * 2)(focal_grid)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/drivers/05_USORT_N128_FPM370M0150_IWA0360_OWA01400_C10_BW20_Nlam5_LS_IDc_ID0_OD_OD0_ls_90_ovsamp16_.py:110: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  focal_plane_mask = 1 - evaluate_supersampled(circular_aperture(2 * fpm_radius), focal_mask_grid, 8)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/drivers/05_USORT_N128_FPM370M0150_IWA0360_OWA01400_C10_BW20_Nlam5_LS_IDc_ID0_OD_OD0_ls_90_ovsamp16_.py:118: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  field_stop = circular_aperture(2 * field_stop_radius)(field_stop_grid)
WARNING: VerifyWarning: Keyword name 'LS_ALIGN_TOl' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'LS_NUM_STOPS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_START' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_EDGE' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ITER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ESTIM' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'MAX_THRPT' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_THRDS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_XOVER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
Optimization finished!
