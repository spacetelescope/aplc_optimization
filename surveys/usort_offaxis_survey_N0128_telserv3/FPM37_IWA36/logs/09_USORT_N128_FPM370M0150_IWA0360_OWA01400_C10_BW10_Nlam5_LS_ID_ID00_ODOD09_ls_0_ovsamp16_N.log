Optimizer called with the following parameters:
{'focal_plane_mask': {'field_stop_radius': 14.5,
                      'grayscale': True,
                      'num_pix': 150,
                      'radius': 3.7},
 'image': {'bandwidth': 0.1,
           'contrast': 10,
           'iwa': 3.6,
           'num_wavelengths': 5,
           'owa': 14.0,
           'resolution': 2},
 'instrument': {'inst_name': 'USORT'},
 'lyot_stop': {'alignment_tolerance': 0,
               'filename': 'USORT/LS_USORT_hex_ID0000_OD0990_ovsamp16_N0128.fits',
               'num_lyot_stops': 1},
 'method': {'edge_width_for_prior': 2,
            'ending_scale': 1,
            'force_no_hermitian_symmetry': False,
            'force_no_x_mirror_symmetry': False,
            'force_no_y_mirror_symmetry': False,
            'initial_throughput_estimate': 1,
            'maximize_planet_throughput': True,
            'num_throughput_iterations': 2,
            'starting_scale': 1},
 'pupil': {'N': 128,
           'filename': 'USORT/TelAp_USORT_offaxis_ovsamp16_N0128.fits'},
 'solver': {'crossover': 0,
            'method': 2,
            'num_threads': 0}}

File organization:
{'analysis_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/analysis',
 'drivers_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/drivers',
 'input_files_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/masks',
 'log_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/logs',
 'solution_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/solutions',
 'survey_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36'}

Telescope pupil:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Lyot stop #0:
   Mirror symmetry in x: yes
Lyot stop #0:
   Mirror symmetry in y: yes

Complete APLC:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Starting optimization at scale 1 with 2726 variables and 2885 constraints.
Creating model...
Set parameter Username
Academic license - for non-commercial use only - expires 2024-10-25
Set parameter Crossover to value 0
Set parameter Method to value 2
Calculating and adding constraints...
Wavelength 1/5; Variable 1000/2726
Wavelength 1/5; Variable 2000/2726
Wavelength 2/5; Variable 1000/2726
Wavelength 2/5; Variable 2000/2726
Wavelength 3/5; Variable 1000/2726
Wavelength 3/5; Variable 2000/2726
Wavelength 4/5; Variable 1000/2726
Wavelength 4/5; Variable 2000/2726
Wavelength 5/5; Variable 1000/2726
Wavelength 5/5; Variable 2000/2726
Start optimization...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5770 rows, 2726 columns and 15729020 nonzeros
Model fingerprint: 0xa1a07515
Coefficient statistics:
  Matrix range     [5e-12, 5e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e-05, 1e-05]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 7.06s
Presolved: 2726 rows, 8496 columns, 15731746 nonzeros
Error: invalid user locale; possible fix is to set the system environment
       variable 'LC_ALL' to a valid locale (e.g., to 'C')
Ordering time: 0.07s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.47731178e+03  0.00000000e+00  0.00e+00 0.00e+00  9.52e-01    11s
   1   3.01889859e+03  6.99642965e+02  0.00e+00 1.48e-01  3.44e-01    11s
   2   2.08205984e+03  8.67312719e+02  0.00e+00 1.20e-01  2.09e-01    12s
   3   1.77569425e+03  1.01534490e+03  0.00e+00 8.80e-02  1.46e-01    13s
   4   1.55682338e+03  1.08437681e+03  0.00e+00 6.73e-02  1.07e-01    14s
   5   1.36411535e+03  1.12131787e+03  0.00e+00 4.89e-02  7.31e-02    15s
   6   1.20950531e+03  1.10460285e+03  0.00e+00 3.67e-02  5.20e-02    15s
   7   1.09830046e+03  1.08393000e+03  0.00e+00 2.91e-02  3.68e-02    16s
   8   1.06032176e+03  1.05901248e+03  0.00e+00 2.22e-02  2.76e-02    17s
   9   1.04292967e+03  1.04172649e+03  0.00e+00 1.90e-02  2.39e-02    18s
  10   1.00974250e+03  1.02918043e+03  0.00e+00 1.66e-02  1.95e-02    19s
  11   9.82143623e+02  9.99491388e+02  0.00e+00 1.19e-02  1.40e-02    19s
  12   9.52545393e+02  9.85837554e+02  0.00e+00 1.02e-02  1.06e-02    20s
  13   9.39850536e+02  9.66699584e+02  0.00e+00 7.98e-03  8.26e-03    21s
  14   9.30654003e+02  9.56271626e+02  0.00e+00 6.90e-03  6.93e-03    22s
  15   9.17430269e+02  9.45110511e+02  0.00e+00 5.74e-03  5.14e-03    22s
  16   9.09330430e+02  9.33805821e+02  0.00e+00 4.60e-03  3.88e-03    23s
  17   9.00833596e+02  9.23665196e+02  0.00e+00 3.56e-03  2.63e-03    24s
  18   8.96034305e+02  9.10539882e+02  0.00e+00 2.26e-03  1.68e-03    25s
  19   8.93294850e+02  9.04771244e+02  0.00e+00 1.72e-03  1.25e-03    26s
  20   8.91391353e+02  8.99970588e+02  0.00e+00 1.28e-03  9.29e-04    27s
  21   8.89445060e+02  8.95564203e+02  0.00e+00 8.75e-04  6.20e-04    27s
  22   8.88418800e+02  8.93608655e+02  0.00e+00 6.98e-04  4.67e-04    28s
  23   8.87345863e+02  8.91384198e+02  0.00e+00 4.97e-04  3.02e-04    29s
  24   8.86417462e+02  8.88691547e+02  0.00e+00 2.57e-04  1.39e-04    30s
  25   8.86153158e+02  8.87658094e+02  0.00e+00 1.64e-04  8.43e-05    31s
  26   8.86005442e+02  8.86898951e+02  0.00e+00 9.77e-05  5.06e-05    32s
  27   8.85913918e+02  8.86374095e+02  0.00e+00 5.14e-05  2.75e-05    33s
  28   8.85875605e+02  8.86040639e+02  0.00e+00 2.20e-05  1.47e-05    33s
  29   8.85851679e+02  8.85876074e+02  1.01e-06 7.36e-06  7.64e-06    34s
  30   8.85804907e+02  8.85826844e+02  2.70e-06 2.90e-06  1.91e-06    36s
  31   8.85799754e+02  8.85800229e+02  1.18e-06 5.02e-07  6.27e-07    37s
  32   8.85796921e+02  8.85795849e+02  6.41e-07 9.66e-08  2.24e-07    39s
  33   8.85796917e+02  8.85795468e+02  1.17e-06 6.02e-08  2.09e-07    40s
  34   8.85796902e+02  8.85795047e+02  8.40e-07 2.02e-08  1.92e-07    42s
  35   8.85796841e+02  8.85794850e+02  1.50e-06 1.93e-09  1.79e-07    43s
  36   8.85796806e+02  8.85794843e+02  1.85e-06 1.12e-09  1.76e-07    44s
  37   8.85796454e+02  8.85794833e+02  2.27e-06 5.08e-13  1.44e-07    46s
  38   8.85796364e+02  8.85794834e+02  3.91e-06 1.57e-12  1.40e-07    47s
  39   8.85796306e+02  8.85794833e+02  4.58e-06 1.78e-12  1.34e-07    49s
  40   8.85796166e+02  8.85794819e+02  1.01e-05 4.06e-13  1.20e-07    51s
  41   8.85795971e+02  8.85794824e+02  1.02e-05 3.27e-13  1.04e-07    52s
  42   8.85795922e+02  8.85794827e+02  1.29e-05 5.88e-13  9.97e-08    53s
  43   8.85795726e+02  8.85794829e+02  2.14e-05 8.85e-13  9.03e-08    54s
  44   8.85795597e+02  8.85794835e+02  2.37e-05 3.55e-13  7.62e-08    55s
  45   8.85795559e+02  8.85794835e+02  2.92e-05 5.88e-13  7.17e-08    56s
  46   8.85795463e+02  8.85794830e+02  3.07e-05 4.22e-13  3.40e-08    57s
  47   8.85795384e+02  8.85794831e+02  4.59e-05 3.95e-13  3.10e-08    58s
  48   8.85794820e+02  8.85794836e+02  2.45e-05 2.93e-13  7.56e-10    59s
  49   8.85794821e+02  8.85794837e+02  1.27e-05 3.56e-13  3.30e-10    60s
  50   8.85795027e+02  8.85794837e+02  3.86e-05 4.00e-13  2.52e-11    60s
  51   8.85794970e+02  8.85794837e+02  1.82e-05 4.43e-13  2.57e-12    61s
  52   8.85794821e+02  8.85794837e+02  1.75e-05 3.70e-13  1.32e-13    62s
  53   8.85794888e+02  8.85794837e+02  1.30e-05 3.82e-13  1.71e-15    63s
  54   8.85794839e+02  8.85794837e+02  1.28e-05 2.35e-12  9.95e-15    64s

Barrier performed 54 iterations in 64.23 seconds (31.17 work units)
Sub-optimal termination - objective 8.85796921e+02

Optimization finished!
Restarting optimization for throughput iteration 1...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5770 rows, 2726 columns and 15729020 nonzeros
Model fingerprint: 0x4655e22a
Coefficient statistics:
  Matrix range     [5e-12, 5e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [4e-06, 4e-06]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 6.98s
Presolved: 2726 rows, 8496 columns, 15731746 nonzeros
Ordering time: 0.07s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.40544207e+03  0.00000000e+00  0.00e+00 0.00e+00  9.43e-01    10s
   1   2.95141317e+03  6.96668090e+02  0.00e+00 1.47e-01  3.40e-01    11s
   2   1.95922592e+03  8.65349170e+02  0.00e+00 1.22e-01  2.04e-01    12s
   3   1.70552794e+03  9.94617646e+02  0.00e+00 9.13e-02  1.50e-01    13s
   4   1.38492399e+03  1.02081742e+03  0.00e+00 8.33e-02  1.25e-01    14s
   5   1.18564168e+03  1.03660987e+03  0.00e+00 6.34e-02  9.21e-02    15s
   6   1.04204209e+03  1.01958274e+03  0.00e+00 4.52e-02  6.42e-02    16s
   7   9.53345721e+02  9.84721164e+02  0.00e+00 3.30e-02  4.57e-02    17s
   8   8.99226100e+02  9.55263147e+02  0.00e+00 2.67e-02  3.60e-02    17s
   9   8.77143418e+02  9.38963751e+02  0.00e+00 2.36e-02  3.13e-02    18s
  10   8.61950990e+02  9.26881336e+02  0.00e+00 2.19e-02  2.87e-02    19s
  11   8.49568594e+02  9.16883557e+02  0.00e+00 2.04e-02  2.64e-02    20s
  12   8.16992849e+02  8.94429292e+02  0.00e+00 1.72e-02  2.09e-02    21s
  13   7.95691500e+02  8.66704637e+02  0.00e+00 1.39e-02  1.62e-02    21s
  14   7.88394314e+02  8.52624634e+02  0.00e+00 1.22e-02  1.41e-02    22s
  15   7.76061546e+02  8.34655933e+02  0.00e+00 1.01e-02  1.12e-02    23s
  16   7.73736257e+02  8.21070675e+02  0.00e+00 8.59e-03  9.84e-03    23s
  17   7.64669278e+02  8.11633763e+02  0.00e+00 7.63e-03  8.16e-03    24s
  18   7.54957630e+02  7.96719487e+02  0.00e+00 6.05e-03  5.89e-03    25s
  19   7.51759852e+02  7.85826558e+02  0.00e+00 4.94e-03  4.78e-03    26s
  20   7.48790961e+02  7.77405354e+02  0.00e+00 4.13e-03  3.95e-03    27s
  21   7.45756232e+02  7.67433299e+02  0.00e+00 3.21e-03  3.08e-03    27s
  22   7.42393347e+02  7.62734791e+02  0.00e+00 2.79e-03  2.49e-03    28s
  23   7.39199251e+02  7.54362931e+02  0.00e+00 2.03e-03  1.75e-03    28s
  24   7.35889109e+02  7.48833386e+02  0.00e+00 1.53e-03  1.17e-03    29s
  25   7.34383809e+02  7.44146826e+02  0.00e+00 1.14e-03  8.49e-04    30s
  26   7.33710198e+02  7.41035494e+02  0.00e+00 8.89e-04  6.88e-04    31s
  27   7.32128108e+02  7.37446044e+02  0.00e+00 5.94e-04  4.19e-04    32s
  28   7.31376931e+02  7.34608729e+02  0.00e+00 3.65e-04  2.62e-04    33s
  29   7.30758943e+02  7.32317264e+02  0.00e+00 1.82e-04  1.36e-04    33s
  30   7.30449135e+02  7.31516955e+02  0.00e+00 1.20e-04  8.69e-05    34s
  31   7.30254359e+02  7.31163677e+02  0.00e+00 9.29e-05  5.98e-05    35s
  32   7.30164375e+02  7.30915292e+02  0.00e+00 7.33e-05  4.44e-05    36s
  33   7.30098190e+02  7.30513854e+02  0.00e+00 4.19e-05  2.66e-05    37s
  34   7.30030069e+02  7.30327589e+02  0.00e+00 2.72e-05  1.48e-05    38s
  35   7.30006097e+02  7.30205108e+02  2.08e-06 1.76e-05  9.00e-06    39s
  36   7.30000458e+02  7.30113094e+02  1.97e-06 1.03e-05  5.68e-06    40s
  37   7.29994116e+02  7.30066991e+02  3.89e-06 6.67e-06  3.69e-06    40s
  38   7.29990030e+02  7.30029503e+02  2.11e-06 3.72e-06  2.17e-06    42s
  39   7.29985390e+02  7.30003875e+02  7.33e-07 1.70e-06  9.44e-07    43s
  40   7.29984907e+02  7.29989525e+02  1.16e-06 5.60e-07  4.45e-07    46s
  41   7.29984905e+02  7.29988878e+02  2.31e-06 5.08e-07  4.22e-07    47s
  42   7.29983694e+02  7.29987019e+02  9.04e-07 3.60e-07  2.53e-07    49s
  43   7.29983690e+02  7.29986627e+02  1.31e-06 3.28e-07  2.40e-07    50s
  44   7.29983389e+02  7.29985823e+02  9.73e-07 2.65e-07  1.88e-07    51s
  45   7.29983389e+02  7.29985118e+02  1.52e-06 2.09e-07  1.64e-07    52s
  46   7.29983258e+02  7.29983516e+02  2.82e-06 8.06e-08  9.87e-08    54s
  47   7.29983269e+02  7.29983361e+02  6.58e-06 6.83e-08  8.93e-08    54s
  48   7.29982713e+02  7.29982555e+02  2.26e-06 3.81e-09  1.93e-08    56s
  49   7.29982651e+02  7.29982550e+02  5.40e-06 3.38e-09  1.86e-08    57s
  50   7.29982642e+02  7.29982537e+02  8.96e-06 2.11e-09  1.71e-08    58s
  51   7.29982622e+02  7.29982535e+02  1.46e-05 1.97e-09  1.64e-08    59s
  52   7.29982527e+02  7.29982520e+02  9.56e-06 6.76e-10  2.55e-09    62s
  53   7.29982514e+02  7.29982514e+02  8.31e-06 1.19e-11  1.76e-09    63s
  54   7.29982532e+02  7.29982514e+02  1.79e-05 6.07e-12  1.50e-09    64s
  55   7.29982692e+02  7.29982514e+02  2.50e-05 6.99e-12  1.41e-09    65s
  56   7.29981899e+02  7.29982514e+02  4.82e-05 2.49e-12  1.82e-11    66s

Barrier performed 56 iterations in 65.65 seconds (32.28 work units)
Sub-optimal termination - objective 7.29983389e+02

/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/drivers/09_USORT_N128_FPM370M0150_IWA0360_OWA01400_C10_BW10_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:102: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  dark_zone_mask = circular_aperture(img_owa * 2)(focal_grid) - circular_aperture(img_iwa * 2)(focal_grid)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/drivers/09_USORT_N128_FPM370M0150_IWA0360_OWA01400_C10_BW10_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:110: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  focal_plane_mask = 1 - evaluate_supersampled(circular_aperture(2 * fpm_radius), focal_mask_grid, 8)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM37_IWA36/drivers/09_USORT_N128_FPM370M0150_IWA0360_OWA01400_C10_BW10_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:118: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  field_stop = circular_aperture(2 * field_stop_radius)(field_stop_grid)
WARNING: VerifyWarning: Keyword name 'LS_ALIGN_TOl' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'LS_NUM_STOPS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_START' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_EDGE' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ITER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ESTIM' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'MAX_THRPT' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_THRDS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_XOVER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
Optimization finished!
