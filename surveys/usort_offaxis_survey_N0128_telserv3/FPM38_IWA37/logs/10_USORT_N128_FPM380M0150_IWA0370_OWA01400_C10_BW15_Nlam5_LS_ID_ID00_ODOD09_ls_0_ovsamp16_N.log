Optimizer called with the following parameters:
{'focal_plane_mask': {'field_stop_radius': 14.5,
                      'grayscale': True,
                      'num_pix': 150,
                      'radius': 3.8000000000000003},
 'image': {'bandwidth': 0.15,
           'contrast': 10,
           'iwa': 3.7,
           'num_wavelengths': 5,
           'owa': 14.0,
           'resolution': 2},
 'instrument': {'inst_name': 'USORT'},
 'lyot_stop': {'alignment_tolerance': 0,
               'filename': 'USORT/LS_USORT_hex_ID0000_OD0990_ovsamp16_N0128.fits',
               'num_lyot_stops': 1},
 'method': {'edge_width_for_prior': 2,
            'ending_scale': 1,
            'force_no_hermitian_symmetry': False,
            'force_no_x_mirror_symmetry': False,
            'force_no_y_mirror_symmetry': False,
            'initial_throughput_estimate': 1,
            'maximize_planet_throughput': True,
            'num_throughput_iterations': 2,
            'starting_scale': 1},
 'pupil': {'N': 128,
           'filename': 'USORT/TelAp_USORT_offaxis_ovsamp16_N0128.fits'},
 'solver': {'crossover': 0,
            'method': 2,
            'num_threads': 0}}

File organization:
{'analysis_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM38_IWA37/analysis',
 'drivers_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM38_IWA37/drivers',
 'input_files_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/masks',
 'log_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM38_IWA37/logs',
 'solution_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM38_IWA37/solutions',
 'survey_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM38_IWA37'}

Telescope pupil:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Lyot stop #0:
   Mirror symmetry in x: yes
Lyot stop #0:
   Mirror symmetry in y: yes

Complete APLC:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Starting optimization at scale 1 with 2726 variables and 2875 constraints.
Creating model...
Set parameter Username
Academic license - for non-commercial use only - expires 2024-10-25
Set parameter Crossover to value 0
Set parameter Method to value 2
Calculating and adding constraints...
Wavelength 1/5; Variable 1000/2726
Wavelength 1/5; Variable 2000/2726
Wavelength 2/5; Variable 1000/2726
Wavelength 2/5; Variable 2000/2726
Wavelength 3/5; Variable 1000/2726
Wavelength 3/5; Variable 2000/2726
Wavelength 4/5; Variable 1000/2726
Wavelength 4/5; Variable 2000/2726
Wavelength 5/5; Variable 1000/2726
Wavelength 5/5; Variable 2000/2726
Start optimization...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5750 rows, 2726 columns and 15674500 nonzeros
Model fingerprint: 0xb5d553c2
Coefficient statistics:
  Matrix range     [2e-12, 6e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e-05, 1e-05]
Presolve time: 5.15s
Presolved: 2726 rows, 8476 columns, 15677226 nonzeros
Error: invalid user locale; possible fix is to set the system environment
       variable 'LC_ALL' to a valid locale (e.g., to 'C')
Ordering time: 0.04s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.52693255e+03  0.00000000e+00  0.00e+00 0.00e+00  9.62e-01     7s
   1   2.75036000e+03  5.46782575e+02  0.00e+00 1.83e-01  3.68e-01     7s
   2   1.92236333e+03  8.63364989e+02  0.00e+00 1.23e-01  2.05e-01     7s
   3   1.45391030e+03  1.02526839e+03  0.00e+00 7.91e-02  1.14e-01     8s
   4   1.21747428e+03  1.05045538e+03  0.00e+00 5.92e-02  7.73e-02     8s
   5   1.12559856e+03  1.05091581e+03  0.00e+00 5.02e-02  6.22e-02     8s
   6   1.05602982e+03  1.03370751e+03  0.00e+00 4.24e-02  5.07e-02     9s
   7   9.87526192e+02  1.00570895e+03  0.00e+00 3.21e-02  3.64e-02     9s
   8   9.53953682e+02  9.83330286e+02  0.00e+00 2.63e-02  2.90e-02     9s
   9   9.21201217e+02  9.63703921e+02  0.00e+00 2.25e-02  2.37e-02    10s
  10   8.97856009e+02  9.33450548e+02  0.00e+00 1.73e-02  1.79e-02    10s
  11   8.74237797e+02  9.11597824e+02  0.00e+00 1.38e-02  1.32e-02    10s
  12   8.59312438e+02  8.86435318e+02  0.00e+00 9.54e-03  8.85e-03    11s
  13   8.47626306e+02  8.73523439e+02  0.00e+00 7.59e-03  6.54e-03    11s
  14   8.41110398e+02  8.61998435e+02  0.00e+00 5.90e-03  4.96e-03    12s
  15   8.35813225e+02  8.49342594e+02  0.00e+00 4.02e-03  3.44e-03    12s
  16   8.31456001e+02  8.42645805e+02  0.00e+00 3.12e-03  2.60e-03    12s
  17   8.26854856e+02  8.38190291e+02  0.00e+00 2.52e-03  1.91e-03    13s
  18   8.23847157e+02  8.31781993e+02  0.00e+00 1.69e-03  1.25e-03    13s
  19   8.22364245e+02  8.28895908e+02  0.00e+00 1.33e-03  9.67e-04    13s
  20   8.20923920e+02  8.25766458e+02  0.00e+00 9.54e-04  6.89e-04    14s
  21   8.19665129e+02  8.23178673e+02  0.00e+00 6.47e-04  4.51e-04    14s
  22   8.19044921e+02  8.22016060e+02  0.00e+00 5.13e-04  3.43e-04    14s
  23   8.18623165e+02  8.20191771e+02  0.00e+00 3.01e-04  2.18e-04    15s
  24   8.17916902e+02  8.18915489e+02  0.00e+00 1.56e-04  9.73e-05    15s
  25   8.17726120e+02  8.18199462e+02  0.00e+00 7.49e-05  4.74e-05    16s
  26   8.17633793e+02  8.17896153e+02  0.00e+00 4.08e-05  2.55e-05    16s
  27   8.17558467e+02  8.17688977e+02  0.00e+00 1.76e-05  9.45e-06    16s
  28   8.17545381e+02  8.17582906e+02  0.00e+00 5.42e-06  3.16e-06    17s
  29   8.17539561e+02  8.17550155e+02  1.57e-07 1.65e-06  1.03e-06    17s
  30   8.17537590e+02  8.17539543e+02  2.99e-07 4.12e-07  3.21e-07    17s
  31   8.17536452e+02  8.17537733e+02  9.84e-06 1.96e-07  1.27e-07    18s
  32   8.17536133e+02  8.17536184e+02  2.66e-06 1.30e-08  1.15e-08    18s
  33   8.17536084e+02  8.17536092e+02  4.72e-06 3.32e-10  3.89e-09    19s
  34   8.17536089e+02  8.17536090e+02  9.36e-07 4.48e-13  4.38e-12    21s
  35   8.17536086e+02  8.17536090e+02  1.21e-06 7.14e-13  4.37e-12    21s
  36   8.17536053e+02  8.17536090e+02  9.36e-06 4.72e-13  1.04e-13    21s
  37   8.17536100e+02  8.17536090e+02  7.40e-06 4.27e-13  7.35e-15    22s
  38   8.17536092e+02  8.17536090e+02  5.74e-06 2.82e-13  2.71e-16    22s
  39   8.17536082e+02  8.17536090e+02  7.96e-06 1.11e-12  1.30e-16    22s
  40   8.17536070e+02  8.17536090e+02  7.41e-06 9.17e-13  1.55e-17    23s
  41   8.17536057e+02  8.17536090e+02  8.40e-06 7.62e-13  1.72e-17    23s
  42   8.17536075e+02  8.17536090e+02  4.76e-06 8.51e-13  1.76e-13    24s
  43   8.17536080e+02  8.17536090e+02  3.80e-06 9.36e-13  2.39e-13    25s
  44   8.17536087e+02  8.17536090e+02  5.49e-06 3.98e-13  3.26e-14    25s
  45   8.17536080e+02  8.17536090e+02  7.70e-06 7.39e-14  1.23e-13    26s
  46   8.17536067e+02  8.17536090e+02  4.59e-06 4.01e-13  1.25e-16    26s
  47   8.17536009e+02  8.17536090e+02  9.03e-06 4.22e-13  1.02e-18    26s

Barrier performed 47 iterations in 26.45 seconds (20.98 work units)
Sub-optimal termination - objective 8.17536089e+02

Optimization finished!
Restarting optimization for throughput iteration 1...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5750 rows, 2726 columns and 15674500 nonzeros
Model fingerprint: 0x902e825b
Coefficient statistics:
  Matrix range     [2e-12, 6e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [4e-06, 4e-06]
Presolve removed 0 rows and 0 columns (presolve time = 5s) ...
Presolve time: 5.65s
Presolved: 2726 rows, 8476 columns, 15677226 nonzeros
Ordering time: 0.04s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.44973429e+03  0.00000000e+00  0.00e+00 0.00e+00  9.53e-01     7s
   1   2.67465540e+03  5.28859612e+02  0.00e+00 1.88e-01  3.72e-01     8s
   2   1.85534704e+03  8.32499166e+02  0.00e+00 1.27e-01  2.16e-01     8s
   3   1.38890778e+03  1.00111957e+03  0.00e+00 7.97e-02  1.22e-01     8s
   4   1.12141381e+03  1.00666118e+03  0.00e+00 6.02e-02  8.48e-02     9s
   5   1.01564814e+03  9.85683229e+02  0.00e+00 4.98e-02  6.92e-02     9s
   6   9.44103224e+02  9.56115314e+02  0.00e+00 4.13e-02  5.70e-02     9s
   7   8.53488833e+02  9.17888486e+02  0.00e+00 3.26e-02  4.27e-02    10s
   8   7.98209795e+02  8.78585245e+02  0.00e+00 2.58e-02  3.23e-02    10s
   9   7.79861732e+02  8.62649457e+02  0.00e+00 2.33e-02  2.85e-02    10s
  10   7.65739003e+02  8.45583954e+02  0.00e+00 2.07e-02  2.50e-02    11s
  11   7.44983135e+02  8.27167126e+02  0.00e+00 1.81e-02  2.06e-02    11s
  12   7.35257908e+02  8.07308877e+02  0.00e+00 1.51e-02  1.69e-02    11s
  13   7.26361431e+02  7.92263212e+02  0.00e+00 1.29e-02  1.41e-02    12s
  14   7.21358317e+02  7.81072235e+02  0.00e+00 1.14e-02  1.23e-02    12s
  15   7.15973317e+02  7.64251879e+02  0.00e+00 9.28e-03  9.85e-03    13s
  16   7.10900751e+02  7.51571920e+02  0.00e+00 7.72e-03  7.96e-03    13s
  17   7.07471814e+02  7.36616044e+02  0.00e+00 5.76e-03  5.92e-03    13s
  18   7.01635323e+02  7.22710470e+02  0.00e+00 4.11e-03  4.03e-03    14s
  19   6.99180583e+02  7.21292235e+02  0.00e+00 3.94e-03  3.61e-03    14s
  20   6.97032543e+02  7.17446391e+02  0.00e+00 3.49e-03  3.09e-03    14s
  21   6.93560885e+02  7.08091198e+02  0.00e+00 2.45e-03  2.08e-03    15s
  22   6.92060253e+02  7.03271177e+02  0.00e+00 1.93e-03  1.65e-03    15s
  23   6.90269931e+02  7.00298050e+02  0.00e+00 1.61e-03  1.30e-03    15s
  24   6.88370652e+02  6.95523238e+02  0.00e+00 1.10e-03  8.51e-04    16s
  25   6.88101763e+02  6.94917702e+02  0.00e+00 1.04e-03  7.94e-04    16s
  26   6.87559903e+02  6.92609120e+02  0.00e+00 8.07e-04  6.41e-04    17s
  27   6.86512578e+02  6.92148904e+02  0.00e+00 7.58e-04  5.20e-04    17s
  28   6.85960492e+02  6.89627779e+02  0.00e+00 5.08e-04  3.59e-04    17s
  29   6.85684977e+02  6.88837276e+02  0.00e+00 4.30e-04  3.00e-04    18s
  30   6.85315076e+02  6.88059473e+02  0.00e+00 3.55e-04  2.38e-04    18s
  31   6.85089896e+02  6.87275550e+02  0.00e+00 2.81e-04  1.88e-04    18s
  32   6.84982918e+02  6.86481578e+02  0.00e+00 2.07e-04  1.48e-04    19s
  33   6.84707928e+02  6.85434302e+02  0.00e+00 1.10e-04  8.56e-05    19s
  34   6.84546731e+02  6.85076845e+02  0.00e+00 7.88e-05  6.09e-05    19s
  35   6.84446047e+02  6.84794406e+02  0.00e+00 5.41e-05  4.32e-05    20s
  36   6.84339759e+02  6.84514266e+02  0.00e+00 2.95e-05  2.50e-05    20s
  37   6.84264295e+02  6.84365470e+02  0.00e+00 1.63e-05  1.35e-05    21s
  38   6.84228092e+02  6.84287843e+02  0.00e+00 9.45e-06  7.68e-06    21s
  39   6.84213709e+02  6.84237988e+02  0.00e+00 5.11e-06  4.82e-06    21s
  40   6.84193493e+02  6.84213620e+02  0.00e+00 2.90e-06  2.21e-06    22s
  41   6.84188557e+02  6.84192141e+02  2.65e-07 9.86e-07  1.04e-06    22s
  42   6.84185180e+02  6.84183359e+02  1.26e-07 2.10e-07  4.53e-07    23s
  43   6.84181930e+02  6.84181668e+02  2.12e-08 5.07e-08  9.35e-08    24s
  44   6.84181425e+02  6.84181167e+02  3.56e-08 2.43e-09  2.64e-08    26s
  45   6.84181423e+02  6.84181146e+02  5.99e-08 2.95e-13  2.48e-08    27s
  46   6.84181132e+02  6.84181146e+02  3.99e-05 5.50e-13  1.02e-08    27s
  47   6.84181127e+02  6.84181147e+02  1.08e-05 1.29e-12  1.54e-10    27s
  48   6.84181160e+02  6.84181147e+02  1.04e-05 4.01e-13  7.41e-12    28s
  49   6.84181142e+02  6.84181147e+02  7.09e-06 3.54e-13  1.05e-13    28s
  50   6.84181138e+02  6.84181147e+02  6.70e-06 2.50e-13  2.45e-14    28s
  51   6.84181137e+02  6.84181147e+02  4.38e-06 3.16e-13  1.88e-14    29s
  52   6.84181133e+02  6.84181147e+02  6.03e-06 2.15e-13  2.92e-17    29s
  53   6.84181155e+02  6.84181147e+02  3.67e-06 9.39e-14  5.48e-19    29s
  54   6.84181147e+02  6.84181147e+02  9.71e-06 2.45e-13  1.16e-20    29s

Barrier performed 54 iterations in 29.46 seconds (22.98 work units)
Sub-optimal termination - objective 6.84181425e+02

/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM38_IWA37/drivers/10_USORT_N128_FPM380M0150_IWA0370_OWA01400_C10_BW15_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:102: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  dark_zone_mask = circular_aperture(img_owa * 2)(focal_grid) - circular_aperture(img_iwa * 2)(focal_grid)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM38_IWA37/drivers/10_USORT_N128_FPM380M0150_IWA0370_OWA01400_C10_BW15_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:110: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  focal_plane_mask = 1 - evaluate_supersampled(circular_aperture(2 * fpm_radius), focal_mask_grid, 8)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM38_IWA37/drivers/10_USORT_N128_FPM380M0150_IWA0370_OWA01400_C10_BW15_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:118: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  field_stop = circular_aperture(2 * field_stop_radius)(field_stop_grid)
WARNING: VerifyWarning: Keyword name 'LS_ALIGN_TOl' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'LS_NUM_STOPS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_START' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_EDGE' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ITER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ESTIM' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'MAX_THRPT' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_THRDS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_XOVER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
Optimization finished!
