Optimizer called with the following parameters:
{'focal_plane_mask': {'field_stop_radius': 14.5,
                      'grayscale': True,
                      'num_pix': 150,
                      'radius': 4.0},
 'image': {'bandwidth': 0.15,
           'contrast': 10,
           'iwa': 3.9,
           'num_wavelengths': 5,
           'owa': 14.0,
           'resolution': 2},
 'instrument': {'inst_name': 'USORT'},
 'lyot_stop': {'alignment_tolerance': 0,
               'filename': 'USORT/LS_USORT_hex_ID0000_OD0990_ovsamp16_N0128.fits',
               'num_lyot_stops': 1},
 'method': {'edge_width_for_prior': 2,
            'ending_scale': 1,
            'force_no_hermitian_symmetry': False,
            'force_no_x_mirror_symmetry': False,
            'force_no_y_mirror_symmetry': False,
            'initial_throughput_estimate': 1,
            'maximize_planet_throughput': True,
            'num_throughput_iterations': 2,
            'starting_scale': 1},
 'pupil': {'N': 128,
           'filename': 'USORT/TelAp_USORT_offaxis_ovsamp16_N0128.fits'},
 'solver': {'crossover': 0,
            'method': 2,
            'num_threads': 0}}

File organization:
{'analysis_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/analysis',
 'drivers_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/drivers',
 'input_files_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/masks',
 'log_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/logs',
 'solution_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/solutions',
 'survey_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39'}

Telescope pupil:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Lyot stop #0:
   Mirror symmetry in x: yes
Lyot stop #0:
   Mirror symmetry in y: yes

Complete APLC:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Starting optimization at scale 1 with 2726 variables and 2850 constraints.
Creating model...
Set parameter Username
Academic license - for non-commercial use only - expires 2024-10-25
Set parameter Crossover to value 0
Set parameter Method to value 2
Calculating and adding constraints...
Wavelength 1/5; Variable 1000/2726
Wavelength 1/5; Variable 2000/2726
Wavelength 2/5; Variable 1000/2726
Wavelength 2/5; Variable 2000/2726
Wavelength 3/5; Variable 1000/2726
Wavelength 3/5; Variable 2000/2726
Wavelength 4/5; Variable 1000/2726
Wavelength 4/5; Variable 2000/2726
Wavelength 5/5; Variable 1000/2726
Wavelength 5/5; Variable 2000/2726
Start optimization...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5700 rows, 2726 columns and 15538200 nonzeros
Model fingerprint: 0x78942a82
Coefficient statistics:
  Matrix range     [1e-11, 6e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e-05, 1e-05]
Presolve removed 0 rows and 0 columns (presolve time = 5s) ...
Presolve time: 5.35s
Presolved: 2726 rows, 8426 columns, 15540926 nonzeros
Error: invalid user locale; possible fix is to set the system environment
       variable 'LC_ALL' to a valid locale (e.g., to 'C')
Ordering time: 0.04s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.40806494e+03  0.00000000e+00  0.00e+00 0.00e+00  9.42e-01     7s
   1   2.80300070e+03  6.33925708e+02  0.00e+00 1.69e-01  3.48e-01     8s
   2   2.05850922e+03  1.02128094e+03  0.00e+00 9.25e-02  1.72e-01     8s
   3   1.58663190e+03  1.16565967e+03  0.00e+00 5.90e-02  9.00e-02     8s
   4   1.39600591e+03  1.20299843e+03  0.00e+00 4.04e-02  5.85e-02     9s
   5   1.31925151e+03  1.19134796e+03  0.00e+00 3.22e-02  4.66e-02     9s
   6   1.18925438e+03  1.17632070e+03  0.00e+00 2.69e-02  3.45e-02     9s
   7   1.12293339e+03  1.15475413e+03  0.00e+00 2.21e-02  2.71e-02    10s
   8   1.08768727e+03  1.13352749e+03  0.00e+00 1.90e-02  2.28e-02    10s
   9   1.05488191e+03  1.11289934e+03  0.00e+00 1.58e-02  1.81e-02    11s
  10   1.01834141e+03  1.08618247e+03  0.00e+00 1.27e-02  1.37e-02    11s
  11   1.00700272e+03  1.06813187e+03  0.00e+00 1.09e-02  1.18e-02    11s
  12   9.86243450e+02  1.04820239e+03  0.00e+00 8.97e-03  9.13e-03    12s
  13   9.74053301e+02  1.02362290e+03  0.00e+00 6.58e-03  6.67e-03    12s
  14   9.64181787e+02  1.01234809e+03  0.00e+00 5.65e-03  5.52e-03    12s
  15   9.56778050e+02  1.00429346e+03  0.00e+00 5.05e-03  4.69e-03    13s
  16   9.50011735e+02  9.89514288e+02  0.00e+00 4.02e-03  3.69e-03    13s
  17   9.45212990e+02  9.80233039e+02  0.00e+00 3.40e-03  3.04e-03    13s
  18   9.40759727e+02  9.73026172e+02  0.00e+00 2.92e-03  2.46e-03    14s
  19   9.35664119e+02  9.64174815e+02  0.00e+00 2.34e-03  1.81e-03    14s
  20   9.33402915e+02  9.58580960e+02  0.00e+00 1.97e-03  1.45e-03    15s
  21   9.32278972e+02  9.52710037e+02  0.00e+00 1.60e-03  1.20e-03    15s
  22   9.31370571e+02  9.48193461e+02  0.00e+00 1.32e-03  9.88e-04    15s
  23   9.29172589e+02  9.42604430e+02  0.00e+00 9.59e-04  6.28e-04    16s
  24   9.28483820e+02  9.38756336e+02  0.00e+00 7.26e-04  4.74e-04    16s
  25   9.28136210e+02  9.36381663e+02  0.00e+00 5.83e-04  3.83e-04    16s
  26   9.27661391e+02  9.33718596e+02  0.00e+00 4.23e-04  2.74e-04    16s
  27   9.27249159e+02  9.33029160e+02  0.00e+00 3.80e-04  2.17e-04    17s
  28   9.27081743e+02  9.31828430e+02  0.00e+00 3.07e-04  1.71e-04    17s
  29   9.27000318e+02  9.30684087e+02  0.00e+00 2.37e-04  1.32e-04    18s
  30   9.26939765e+02  9.29944889e+02  0.00e+00 1.94e-04  1.08e-04    18s
  31   9.26846055e+02  9.29262329e+02  0.00e+00 1.54e-04  8.34e-05    18s
  32   9.26774446e+02  9.28638426e+02  0.00e+00 1.17e-04  6.19e-05    19s
  33   9.26727268e+02  9.27728015e+02  0.00e+00 6.33e-05  3.42e-05    19s
  34   9.26686945e+02  9.27222207e+02  0.00e+00 3.38e-05  1.83e-05    20s
  35   9.26671308e+02  9.26901184e+02  5.86e-07 1.51e-05  8.92e-06    21s
  36   9.26666194e+02  9.26776782e+02  5.94e-07 7.74e-06  5.26e-06    21s
  37   9.26652174e+02  9.26693073e+02  8.76e-07 2.78e-06  1.79e-06    22s
  38   9.26648742e+02  9.26658082e+02  2.93e-07 6.93e-07  5.22e-07    24s
  39   9.26648716e+02  9.26648295e+02  6.25e-07 1.05e-07  2.44e-07    25s
  40   9.26647121e+02  9.26646582e+02  1.86e-07 1.26e-09  5.08e-08    27s
  41   9.26647121e+02  9.26646571e+02  3.07e-07 1.50e-10  4.95e-08    28s
  42   9.26647117e+02  9.26646569e+02  4.24e-07 3.50e-13  4.91e-08    29s
  43   9.26647072e+02  9.26646569e+02  8.68e-07 3.37e-13  4.45e-08    30s
  44   9.26647009e+02  9.26646570e+02  1.64e-06 3.84e-13  3.90e-08    34s
  45   9.26646527e+02  9.26646568e+02  2.68e-05 3.44e-13  3.84e-10    34s
  46   9.26646784e+02  9.26646569e+02  2.61e-05 2.59e-13  5.22e-11    36s
  47   9.26646560e+02  9.26646570e+02  1.40e-05 3.77e-13  5.93e-13    36s
  48   9.26646561e+02  9.26646570e+02  5.22e-06 3.46e-13  2.19e-16    37s
  49   9.26646568e+02  9.26646570e+02  3.49e-06 2.82e-13  9.01e-18    37s
  50   9.26646584e+02  9.26646570e+02  4.63e-06 1.02e-13  1.24e-19    38s
  51   9.26646563e+02  9.26646570e+02  1.23e-05 2.37e-13  5.93e-19    38s
  52   9.26646604e+02  9.26646570e+02  8.17e-06 1.55e-13  8.15e-20    39s
  53   9.26646659e+02  9.26646570e+02  2.10e-05 2.60e-13  2.37e-20    39s

Barrier performed 53 iterations in 39.04 seconds (26.51 work units)
Sub-optimal termination - objective 9.26647121e+02

Optimization finished!
Restarting optimization for throughput iteration 1...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5700 rows, 2726 columns and 15538200 nonzeros
Model fingerprint: 0xc68f3b23
Coefficient statistics:
  Matrix range     [1e-11, 6e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [4e-06, 4e-06]
Presolve removed 0 rows and 0 columns (presolve time = 5s) ...
Presolve time: 5.89s
Presolved: 2726 rows, 8426 columns, 15540926 nonzeros
Ordering time: 0.06s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.34071746e+03  0.00000000e+00  0.00e+00 0.00e+00  9.34e-01     8s
   1   2.73508842e+03  6.20411102e+02  0.00e+00 1.72e-01  3.49e-01     9s
   2   1.98459103e+03  9.81375353e+02  0.00e+00 9.83e-02  1.81e-01     9s
   3   1.52765859e+03  1.12518767e+03  0.00e+00 6.28e-02  9.91e-02    10s
   4   1.30124354e+03  1.15273378e+03  0.00e+00 4.88e-02  6.97e-02    10s
   5   1.20278978e+03  1.13878719e+03  0.00e+00 4.08e-02  5.75e-02    11s
   6   1.06851735e+03  1.12782566e+03  0.00e+00 3.72e-02  4.87e-02    11s
   7   9.99627969e+02  1.09601557e+03  0.00e+00 2.86e-02  3.66e-02    12s
   8   9.43059714e+02  1.07011147e+03  0.00e+00 2.53e-02  3.19e-02    13s
   9   8.98466854e+02  1.04081819e+03  0.00e+00 2.16e-02  2.65e-02    13s
  10   8.83254966e+02  1.02321842e+03  0.00e+00 2.01e-02  2.45e-02    14s
  11   8.49060013e+02  9.84871287e+02  0.00e+00 1.63e-02  1.92e-02    14s
  12   8.29753167e+02  9.45304296e+02  0.00e+00 1.29e-02  1.52e-02    15s
  13   8.02327905e+02  9.20280271e+02  0.00e+00 1.11e-02  1.21e-02    15s
  14   7.90730158e+02  9.03840547e+02  0.00e+00 9.94e-03  1.06e-02    16s
  15   7.86064088e+02  8.85122543e+02  0.00e+00 8.66e-03  9.33e-03    16s
  16   7.80083383e+02  8.74576951e+02  0.00e+00 7.95e-03  8.51e-03    17s
  17   7.75195082e+02  8.66483524e+02  0.00e+00 7.42e-03  7.84e-03    17s
  18   7.73014587e+02  8.50277613e+02  0.00e+00 6.37e-03  6.89e-03    18s
  19   7.63814471e+02  8.44206148e+02  0.00e+00 6.01e-03  5.96e-03    18s
  20   7.59698291e+02  8.25248054e+02  0.00e+00 4.86e-03  4.81e-03    19s
  21   7.56781797e+02  8.14537483e+02  0.00e+00 4.28e-03  4.28e-03    19s
  22   7.53680884e+02  8.06592068e+02  0.00e+00 3.83e-03  3.74e-03    20s
  23   7.48015370e+02  7.89735626e+02  0.00e+00 2.91e-03  2.71e-03    20s
  24   7.45976530e+02  7.79899592e+02  0.00e+00 2.39e-03  2.25e-03    21s
  25   7.44527952e+02  7.76954511e+02  0.00e+00 2.23e-03  2.05e-03    21s
  26   7.42344409e+02  7.71568676e+02  0.00e+00 1.94e-03  1.72e-03    22s
  27   7.40200960e+02  7.67110547e+02  0.00e+00 1.71e-03  1.42e-03    23s
  28   7.38472504e+02  7.61601718e+02  0.00e+00 1.43e-03  1.13e-03    23s
  29   7.37453406e+02  7.56368991e+02  0.00e+00 1.16e-03  9.32e-04    24s
  30   7.36573378e+02  7.53856901e+02  0.00e+00 1.04e-03  8.06e-04    24s
  31   7.36058354e+02  7.52357387e+02  0.00e+00 9.63e-04  7.30e-04    25s
  32   7.35343228e+02  7.47210620e+02  0.00e+00 7.10e-04  5.56e-04    26s
  33   7.34849468e+02  7.46048538e+02  0.00e+00 6.54e-04  4.92e-04    26s
  34   7.34073286e+02  7.41925304e+02  0.00e+00 4.57e-04  3.49e-04    27s
  35   7.33274012e+02  7.39049841e+02  0.00e+00 3.21e-04  2.23e-04    28s
  36   7.32857863e+02  7.37944387e+02  0.00e+00 2.70e-04  1.70e-04    28s
  37   7.32613532e+02  7.36752088e+02  0.00e+00 2.15e-04  1.30e-04    29s
  38   7.32443945e+02  7.36041359e+02  0.00e+00 1.83e-04  1.04e-04    30s
  39   7.32352075e+02  7.35161269e+02  0.00e+00 1.43e-04  8.14e-05    30s
  40   7.32264175e+02  7.34503051e+02  0.00e+00 1.13e-04  6.29e-05    31s
  41   7.32171349e+02  7.33831066e+02  0.00e+00 8.26e-05  4.41e-05    31s
  42   7.32097619e+02  7.33262950e+02  0.00e+00 5.70e-05  2.87e-05    32s
  43   7.32062994e+02  7.32780641e+02  0.00e+00 3.52e-05  1.79e-05    33s
  44   7.32054023e+02  7.32415767e+02  0.00e+00 1.87e-05  1.12e-05    33s
  45   7.32022336e+02  7.32197459e+02  1.18e-06 8.78e-06  4.83e-06    34s
  46   7.32013073e+02  7.32139498e+02  1.78e-06 6.15e-06  3.06e-06    34s
  47   7.32007729e+02  7.32062294e+02  1.52e-06 2.65e-06  1.31e-06    35s
  48   7.32004488e+02  7.32017449e+02  8.06e-07 6.11e-07  2.67e-07    36s
  49   7.32004127e+02  7.32004753e+02  2.73e-07 3.18e-08  1.84e-08    37s
  50   7.32004126e+02  7.32004543e+02  4.09e-07 2.20e-08  1.42e-08    38s
  51   7.32004108e+02  7.32004123e+02  6.87e-07 2.37e-09  4.03e-09    39s
  52   7.32004074e+02  7.32004073e+02  7.62e-08 1.64e-13  5.25e-12    41s

Barrier solved model in 52 iterations and 41.13 seconds (23.94 work units)
Optimal objective 7.32004074e+02

/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/drivers/10_USORT_N128_FPM400M0150_IWA0390_OWA01400_C10_BW15_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:102: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  dark_zone_mask = circular_aperture(img_owa * 2)(focal_grid) - circular_aperture(img_iwa * 2)(focal_grid)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/drivers/10_USORT_N128_FPM400M0150_IWA0390_OWA01400_C10_BW15_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:110: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  focal_plane_mask = 1 - evaluate_supersampled(circular_aperture(2 * fpm_radius), focal_mask_grid, 8)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/drivers/10_USORT_N128_FPM400M0150_IWA0390_OWA01400_C10_BW15_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:118: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  field_stop = circular_aperture(2 * field_stop_radius)(field_stop_grid)
WARNING: VerifyWarning: Keyword name 'LS_ALIGN_TOl' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'LS_NUM_STOPS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_START' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_EDGE' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ITER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ESTIM' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'MAX_THRPT' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_THRDS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_XOVER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
Optimization finished!
