Optimizer called with the following parameters:
{'focal_plane_mask': {'field_stop_radius': None,
                      'grayscale': True,
                      'num_pix': 150,
                      'radius': 4.0},
 'image': {'bandwidth': 0.1,
           'contrast': 10,
           'iwa': 3.9,
           'num_wavelengths': 5,
           'owa': 14.0,
           'resolution': 2},
 'instrument': {'inst_name': 'USORT'},
 'lyot_stop': {'alignment_tolerance': 0,
               'filename': 'USORT/LS_USORT_hex_ID0000_OD0990_ovsamp16_N0128.fits',
               'num_lyot_stops': 1},
 'method': {'edge_width_for_prior': 2,
            'ending_scale': 1,
            'force_no_hermitian_symmetry': False,
            'force_no_x_mirror_symmetry': False,
            'force_no_y_mirror_symmetry': False,
            'initial_throughput_estimate': 1,
            'maximize_planet_throughput': True,
            'num_throughput_iterations': 2,
            'starting_scale': 1},
 'pupil': {'N': 128,
           'filename': 'USORT/TelAp_USORT_offaxis_ovsamp16_N0128.fits'},
 'solver': {'crossover': 0,
            'method': 2,
            'num_threads': 0}}

File organization:
{'analysis_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/analysis',
 'drivers_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/drivers',
 'input_files_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/masks',
 'log_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/logs',
 'solution_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/solutions',
 'survey_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39'}

Telescope pupil:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Lyot stop #0:
   Mirror symmetry in x: yes
Lyot stop #0:
   Mirror symmetry in y: yes

Complete APLC:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Starting optimization at scale 1 with 2726 variables and 2850 constraints.
Creating model...
Set parameter Username
Academic license - for non-commercial use only - expires 2024-10-25
Set parameter Crossover to value 0
Set parameter Method to value 2
Calculating and adding constraints...
Wavelength 1/5; Variable 1000/2726
Wavelength 1/5; Variable 2000/2726
Wavelength 2/5; Variable 1000/2726
Wavelength 2/5; Variable 2000/2726
Wavelength 3/5; Variable 1000/2726
Wavelength 3/5; Variable 2000/2726
Wavelength 4/5; Variable 1000/2726
Wavelength 4/5; Variable 2000/2726
Wavelength 5/5; Variable 1000/2726
Wavelength 5/5; Variable 2000/2726
Start optimization...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5700 rows, 2726 columns and 15538200 nonzeros
Model fingerprint: 0x82fdc4a2
Coefficient statistics:
  Matrix range     [3e-12, 6e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e-05, 1e-05]
Presolve removed 0 rows and 0 columns (presolve time = 7s) ...
Presolve time: 8.07s
Presolved: 2726 rows, 8426 columns, 15540926 nonzeros
Error: invalid user locale; possible fix is to set the system environment
       variable 'LC_ALL' to a valid locale (e.g., to 'C')
Ordering time: 0.10s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.28614791e+03  0.00000000e+00  0.00e+00 0.00e+00  9.14e-01    14s
   1   2.72924468e+03  6.24020708e+02  0.00e+00 1.82e-01  3.37e-01    16s
   2   2.12720133e+03  1.16366818e+03  0.00e+00 9.11e-02  1.54e-01    17s
   3   1.82802951e+03  1.40881657e+03  0.00e+00 3.86e-02  6.32e-02    21s
   4   1.69975313e+03  1.46623251e+03  0.00e+00 2.00e-02  3.21e-02    23s
   5   1.63695528e+03  1.47990575e+03  0.00e+00 1.44e-02  2.10e-02    24s
   6   1.59369268e+03  1.49111275e+03  0.00e+00 8.84e-03  1.28e-02    26s
   7   1.54826688e+03  1.49689759e+03  0.00e+00 4.63e-03  6.10e-03    28s
   8   1.53397033e+03  1.49996323e+03  0.00e+00 2.76e-03  3.86e-03    30s
   9   1.52185382e+03  1.50105010e+03  0.00e+00 2.05e-03  2.40e-03    32s
  10   1.51425133e+03  1.50269676e+03  0.00e+00 1.16e-03  1.32e-03    34s
  11   1.51144477e+03  1.50334126e+03  0.00e+00 8.31e-04  9.23e-04    36s
  12   1.50891793e+03  1.50398993e+03  0.00e+00 5.24e-04  5.62e-04    39s
  13   1.50707370e+03  1.50442695e+03  0.00e+00 3.42e-04  3.14e-04    42s
  14   1.50621880e+03  1.50476340e+03  0.00e+00 1.92e-04  1.73e-04    45s
  15   1.50593423e+03  1.50492891e+03  0.00e+00 1.20e-04  1.17e-04    47s
  16   1.50563219e+03  1.50501933e+03  0.00e+00 8.32e-05  7.32e-05    49s
  17   1.50543180e+03  1.50513830e+03  0.00e+00 3.45e-05  3.39e-05    51s
  18   1.50535508e+03  1.50517426e+03  0.00e+00 2.03e-05  2.07e-05    53s
  19   1.50528837e+03  1.50519716e+03  0.00e+00 1.10e-05  1.06e-05    55s
  20   1.50524995e+03  1.50522233e+03  0.00e+00 1.61e-06  2.83e-06    58s
  21   1.50523153e+03  1.50522586e+03  0.00e+00 4.87e-07  6.16e-07    61s
  22   1.50522847e+03  1.50522681e+03  3.80e-08 2.14e-07  1.96e-07    63s
  23   1.50522842e+03  1.50522732e+03  7.70e-08 7.42e-08  1.15e-07    68s
  24   1.50522842e+03  1.50522745e+03  1.84e-07 3.86e-08  9.53e-08    72s
  25   1.50522839e+03  1.50522756e+03  4.07e-07 1.25e-08  7.77e-08    75s
  26   1.50522839e+03  1.50522756e+03  5.55e-07 1.24e-08  7.76e-08    78s
  27   1.50522839e+03  1.50522757e+03  7.03e-07 7.90e-09  7.44e-08    81s
  28   1.50522825e+03  1.50522760e+03  1.31e-06 4.13e-13  5.79e-08    88s
  29   1.50522824e+03  1.50522760e+03  1.67e-06 4.56e-13  5.64e-08    97s
  30   1.50522820e+03  1.50522760e+03  1.69e-06 4.29e-13  5.26e-08   102s
  31   1.50522819e+03  1.50522760e+03  2.68e-06 3.25e-13  5.13e-08   106s
  32   1.50522807e+03  1.50522761e+03  4.41e-06 4.72e-13  3.56e-08   108s
  33   1.50522773e+03  1.50522761e+03  7.21e-06 4.09e-13  1.36e-08   113s
  34   1.50522769e+03  1.50522761e+03  8.33e-06 6.43e-13  5.00e-11   116s
  35   1.50522759e+03  1.50522761e+03  8.10e-06 4.91e-13  1.67e-11   119s
  36   1.50522762e+03  1.50522761e+03  3.96e-06 4.92e-13  1.72e-12   123s
  37   1.50522761e+03  1.50522761e+03  4.95e-06 4.34e-13  5.67e-13   127s
  38   1.50522759e+03  1.50522761e+03  7.13e-06 6.10e-13  1.90e-13   130s
  39   1.50522763e+03  1.50522761e+03  2.50e-06 3.67e-13  1.97e-16   133s
  40   1.50522765e+03  1.50522761e+03  2.19e-06 1.62e-13  1.58e-16   136s
  41   1.50522760e+03  1.50522761e+03  2.78e-06 1.28e-13  6.78e-17   139s
  42   1.50522763e+03  1.50522761e+03  7.72e-06 8.71e-14  1.26e-17   143s
  43   1.50522764e+03  1.50522761e+03  6.28e-06 1.15e-13  1.57e-20   147s
  44   1.50522764e+03  1.50522761e+03  6.07e-06 1.09e-13  4.42e-23   154s

Barrier performed 44 iterations in 153.56 seconds (28.79 work units)
Sub-optimal termination - objective 1.50522842e+03

Optimization finished!
Restarting optimization for throughput iteration 1...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5700 rows, 2726 columns and 15538200 nonzeros
Model fingerprint: 0x612434bf
Coefficient statistics:
  Matrix range     [3e-12, 6e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [7e-06, 7e-06]
Presolve removed 0 rows and 0 columns (presolve time = 8s) ...
Presolve time: 9.34s
Presolved: 2726 rows, 8426 columns, 15540926 nonzeros
Ordering time: 0.11s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.24345722e+03  0.00000000e+00  0.00e+00 0.00e+00  9.09e-01    15s
   1   2.68691529e+03  6.13775810e+02  0.00e+00 1.85e-01  3.38e-01    17s
   2   2.08500264e+03  1.16249706e+03  0.00e+00 9.03e-02  1.53e-01    19s
   3   1.79073310e+03  1.40616436e+03  0.00e+00 3.79e-02  6.22e-02    21s
   4   1.67176280e+03  1.45199464e+03  0.00e+00 2.30e-02  3.45e-02    24s
   5   1.60691805e+03  1.47279082e+03  0.00e+00 1.41e-02  1.98e-02    27s
   6   1.56860853e+03  1.48331959e+03  0.00e+00 7.43e-03  1.11e-02    29s
   7   1.53288102e+03  1.48848751e+03  0.00e+00 4.17e-03  5.52e-03    33s
   8   1.51656906e+03  1.49066344e+03  0.00e+00 2.67e-03  3.18e-03    35s
   9   1.50967799e+03  1.49216852e+03  0.00e+00 1.62e-03  2.04e-03    37s
  10   1.50186855e+03  1.49289832e+03  0.00e+00 1.26e-03  1.14e-03    40s
  11   1.49941874e+03  1.49359047e+03  0.00e+00 8.78e-04  7.52e-04    42s
  12   1.49787959e+03  1.49411748e+03  0.00e+00 5.96e-04  4.92e-04    44s
  13   1.49668604e+03  1.49451079e+03  0.00e+00 4.13e-04  3.05e-04    47s
  14   1.49645644e+03  1.49462023e+03  0.00e+00 3.57e-04  2.59e-04    50s
  15   1.49598963e+03  1.49478748e+03  0.00e+00 2.48e-04  1.73e-04    52s
  16   1.49562047e+03  1.49499396e+03  0.00e+00 1.32e-04  9.08e-05    55s
  17   1.49546017e+03  1.49505192e+03  0.00e+00 9.04e-05  6.04e-05    57s
  18   1.49532873e+03  1.49510420e+03  0.00e+00 5.89e-05  3.56e-05    59s
  19   1.49528578e+03  1.49515865e+03  0.00e+00 2.87e-05  1.90e-05    61s
  20   1.49524797e+03  1.49517446e+03  0.00e+00 1.66e-05  1.10e-05    64s
  21   1.49522407e+03  1.49518374e+03  4.93e-09 6.83e-06  5.41e-06    65s
  22   1.49521416e+03  1.49518673e+03  0.00e+00 3.61e-06  3.41e-06    67s
  23   1.49520075e+03  1.49518904e+03  1.29e-07 1.76e-06  1.51e-06    70s
  24   1.49519582e+03  1.49519028e+03  4.57e-07 6.04e-07  6.56e-07    71s
  25   1.49519193e+03  1.49519078e+03  2.68e-07 1.89e-07  1.53e-07    74s
  26   1.49519168e+03  1.49519100e+03  1.03e-06 1.53e-08  6.41e-08    79s
  27   1.49519161e+03  1.49519103e+03  1.15e-06 4.49e-10  5.17e-08    84s
  28   1.49519159e+03  1.49519103e+03  1.70e-06 1.92e-11  5.04e-08    87s
  29   1.49519157e+03  1.49519103e+03  2.46e-06 1.64e-11  4.95e-08    90s
  30   1.49519157e+03  1.49519103e+03  2.76e-06 1.13e-11  4.81e-08    93s
  31   1.49519139e+03  1.49519103e+03  3.12e-06 5.26e-13  3.12e-08    97s
  32   1.49519136e+03  1.49519103e+03  3.51e-06 7.13e-13  2.88e-08   102s
  33   1.49519133e+03  1.49519103e+03  4.40e-06 6.35e-13  2.64e-08   106s
  34   1.49519126e+03  1.49519103e+03  3.94e-06 3.80e-13  1.25e-08   111s
  35   1.49519119e+03  1.49519103e+03  5.61e-06 6.31e-13  4.58e-09   114s
  36   1.49519094e+03  1.49519103e+03  8.86e-06 6.26e-13  2.43e-10   117s
  37   1.49519095e+03  1.49519103e+03  5.42e-06 7.31e-13  1.51e-10   122s
  38   1.49519098e+03  1.49519103e+03  2.75e-06 4.31e-13  4.31e-12   127s
  39   1.49519101e+03  1.49519103e+03  3.18e-06 6.38e-13  1.90e-12   132s
  40   1.49519103e+03  1.49519103e+03  3.87e-06 4.98e-13  6.62e-13   135s
  41   1.49519102e+03  1.49519103e+03  6.52e-06 7.10e-13  1.23e-13   139s
  42   1.49519096e+03  1.49519103e+03  1.34e-05 4.94e-13  2.31e-14   142s
  43   1.49519100e+03  1.49519103e+03  6.77e-06 5.83e-13  2.25e-14   146s
  44   1.49519104e+03  1.49519103e+03  5.90e-06 9.59e-13  6.26e-14   148s
  45   1.49519103e+03  1.49519103e+03  6.41e-06 1.83e-13  1.83e-13   150s
  46   1.49519103e+03  1.49519103e+03  2.12e-06 1.52e-13  3.35e-14   152s
  47   1.49519106e+03  1.49519103e+03  2.86e-06 1.23e-13  7.49e-14   154s
  48   1.49519101e+03  1.49519103e+03  2.69e-06 5.99e-13  1.09e-15   155s
  49   1.49519102e+03  1.49519103e+03  4.25e-06 4.40e-13  2.00e-15   157s
  50   1.49519100e+03  1.49519103e+03  4.82e-06 1.42e-13  5.07e-18   157s
  51   1.49519097e+03  1.49519103e+03  6.06e-06 1.09e-13  1.26e-20   158s

Barrier performed 51 iterations in 157.88 seconds (32.38 work units)
Sub-optimal termination - objective 1.49519168e+03

/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/drivers/06_USORT_N128_FPM400M0150_IWA0390_OWA01400_C10_BW10_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:102: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  dark_zone_mask = circular_aperture(img_owa * 2)(focal_grid) - circular_aperture(img_iwa * 2)(focal_grid)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM40_IWA39/drivers/06_USORT_N128_FPM400M0150_IWA0390_OWA01400_C10_BW10_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:110: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  focal_plane_mask = 1 - evaluate_supersampled(circular_aperture(2 * fpm_radius), focal_mask_grid, 8)
WARNING: VerifyWarning: Keyword name 'LS_ALIGN_TOl' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'LS_NUM_STOPS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_START' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_EDGE' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ITER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ESTIM' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'MAX_THRPT' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_THRDS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_XOVER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
Optimization finished!
