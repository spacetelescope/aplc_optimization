Optimizer called with the following parameters:
{'focal_plane_mask': {'field_stop_radius': 14.5,
                      'grayscale': True,
                      'num_pix': 150,
                      'radius': 3.9000000000000004},
 'image': {'bandwidth': 0.2,
           'contrast': 10,
           'iwa': 3.8000000000000003,
           'num_wavelengths': 5,
           'owa': 14.0,
           'resolution': 2},
 'instrument': {'inst_name': 'USORT'},
 'lyot_stop': {'alignment_tolerance': 0,
               'filename': 'USORT/LS_USORT_hex_ID0000_OD0990_ovsamp16_N0128.fits',
               'num_lyot_stops': 1},
 'method': {'edge_width_for_prior': 2,
            'ending_scale': 1,
            'force_no_hermitian_symmetry': False,
            'force_no_x_mirror_symmetry': False,
            'force_no_y_mirror_symmetry': False,
            'initial_throughput_estimate': 1,
            'maximize_planet_throughput': True,
            'num_throughput_iterations': 2,
            'starting_scale': 1},
 'pupil': {'N': 128,
           'filename': 'USORT/TelAp_USORT_offaxis_ovsamp16_N0128.fits'},
 'solver': {'crossover': 0,
            'method': 2,
            'num_threads': 0}}

File organization:
{'analysis_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/analysis',
 'drivers_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/drivers',
 'input_files_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/masks',
 'log_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/logs',
 'solution_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/solutions',
 'survey_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38'}

Telescope pupil:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Lyot stop #0:
   Mirror symmetry in x: yes
Lyot stop #0:
   Mirror symmetry in y: yes

Complete APLC:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Starting optimization at scale 1 with 2726 variables and 2865 constraints.
Creating model...
Set parameter Username
Academic license - for non-commercial use only - expires 2024-10-25
Set parameter Crossover to value 0
Set parameter Method to value 2
Calculating and adding constraints...
Wavelength 1/5; Variable 1000/2726
Wavelength 1/5; Variable 2000/2726
Wavelength 2/5; Variable 1000/2726
Wavelength 2/5; Variable 2000/2726
Wavelength 3/5; Variable 1000/2726
Wavelength 3/5; Variable 2000/2726
Wavelength 4/5; Variable 1000/2726
Wavelength 4/5; Variable 2000/2726
Wavelength 5/5; Variable 1000/2726
Wavelength 5/5; Variable 2000/2726
Start optimization...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5730 rows, 2726 columns and 15619980 nonzeros
Model fingerprint: 0x15128b18
Coefficient statistics:
  Matrix range     [3e-12, 5e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e-05, 1e-05]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 6.97s
Presolved: 2726 rows, 8456 columns, 15622706 nonzeros
Error: invalid user locale; possible fix is to set the system environment
       variable 'LC_ALL' to a valid locale (e.g., to 'C')
Ordering time: 0.05s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.59375795e+03  0.00000000e+00  0.00e+00 0.00e+00  9.77e-01    10s
   1   2.79051689e+03  5.72965701e+02  0.00e+00 1.82e-01  3.74e-01    10s
   2   1.83805149e+03  8.95779420e+02  0.00e+00 1.19e-01  1.90e-01    10s
   3   1.43409028e+03  1.01084429e+03  0.00e+00 7.58e-02  1.11e-01    11s
   4   1.23066906e+03  1.01517713e+03  0.00e+00 5.82e-02  8.04e-02    11s
   5   1.13745072e+03  1.00842273e+03  0.00e+00 5.30e-02  6.91e-02    11s
   6   1.06808924e+03  9.90821076e+02  0.00e+00 4.36e-02  5.55e-02    12s
   7   9.88916783e+02  9.77396626e+02  0.00e+00 3.59e-02  4.19e-02    12s
   8   9.40722035e+02  9.59455138e+02  0.00e+00 2.96e-02  3.24e-02    13s
   9   9.20907870e+02  9.50341813e+02  0.00e+00 2.73e-02  2.89e-02    13s
  10   8.94279121e+02  9.36747691e+02  0.00e+00 2.41e-02  2.42e-02    14s
  11   8.80832328e+02  9.15029536e+02  0.00e+00 1.96e-02  1.95e-02    14s
  12   8.61290070e+02  8.87513830e+02  0.00e+00 1.43e-02  1.40e-02    14s
  13   8.44941590e+02  8.73085423e+02  0.00e+00 1.19e-02  1.10e-02    15s
  14   8.35953967e+02  8.63506697e+02  0.00e+00 1.05e-02  9.34e-03    15s
  15   8.27625441e+02  8.57207890e+02  0.00e+00 9.55e-03  8.02e-03    15s
  16   8.22305834e+02  8.53400508e+02  0.00e+00 9.06e-03  7.30e-03    16s
  17   8.15095860e+02  8.36560463e+02  0.00e+00 6.43e-03  5.19e-03    16s
  18   8.07836849e+02  8.29016897e+02  0.00e+00 5.30e-03  3.92e-03    16s
  19   8.02303455e+02  8.24159400e+02  0.00e+00 4.64e-03  3.12e-03    17s
  20   8.00084190e+02  8.21659738e+02  0.00e+00 4.33e-03  2.77e-03    17s
  21   7.98023682e+02  8.12695832e+02  0.00e+00 3.12e-03  2.09e-03    17s
  22   7.95752410e+02  8.09402804e+02  0.00e+00 2.72e-03  1.75e-03    18s
  23   7.94545333e+02  8.06311399e+02  0.00e+00 2.35e-03  1.54e-03    19s
  24   7.91741306e+02  8.02795354e+02  0.00e+00 1.93e-03  1.15e-03    20s
  25   7.90217416e+02  7.99317762e+02  0.00e+00 1.53e-03  8.89e-04    21s
  26   7.88939901e+02  7.96072534e+02  0.00e+00 1.17e-03  6.68e-04    22s
  27   7.87573944e+02  7.93060018e+02  0.00e+00 8.35e-04  4.45e-04    23s
  28   7.86523881e+02  7.89733595e+02  0.00e+00 4.65e-04  2.36e-04    24s
  29   7.86038043e+02  7.88611263e+02  0.00e+00 3.43e-04  1.56e-04    24s
  30   7.85883782e+02  7.87326787e+02  0.00e+00 2.06e-04  1.03e-04    25s
  31   7.85698045e+02  7.86281471e+02  0.00e+00 9.36e-05  5.35e-05    25s
  32   7.85499517e+02  7.85943957e+02  0.00e+00 5.77e-05  2.55e-05    26s
  33   7.85439278e+02  7.85524623e+02  0.00e+00 1.25e-05  6.54e-06    27s
  34   7.85420382e+02  7.85442319e+02  0.00e+00 3.57e-06  2.08e-06    27s
  35   7.85415993e+02  7.85421380e+02  7.85e-08 1.26e-06  9.48e-07    28s
  36   7.85412159e+02  7.85415457e+02  9.78e-07 6.08e-07  3.92e-07    28s
  37   7.85410447e+02  7.85411413e+02  3.18e-06 1.55e-07  8.97e-08    29s
  38   7.85410118e+02  7.85410441e+02  3.79e-06 4.27e-08  1.90e-08    30s
  39   7.85410070e+02  7.85410060e+02  9.99e-06 3.28e-10  8.59e-10    31s
  40   7.85410094e+02  7.85410059e+02  1.80e-05 2.88e-10  8.19e-10    32s
  41   7.85409937e+02  7.85410058e+02  2.66e-05 2.01e-12  3.04e-11    33s
  42   7.85409975e+02  7.85410058e+02  2.80e-05 3.26e-13  1.68e-11    34s
  43   7.85410287e+02  7.85410058e+02  3.96e-05 3.76e-13  1.50e-12    35s
  44   7.85410170e+02  7.85410058e+02  4.87e-05 5.09e-13  1.52e-12    37s
  45   7.85410250e+02  7.85410058e+02  4.91e-05 4.04e-13  8.47e-13    38s
  46   7.85410250e+02  7.85410058e+02  4.91e-05 3.80e-13  8.10e-13    38s
  47   7.85410153e+02  7.85410058e+02  1.73e-05 2.46e-13  4.49e-13    40s
  48   7.85410199e+02  7.85410058e+02  3.16e-05 3.21e-13  2.16e-13    41s
  49   7.85410290e+02  7.85410058e+02  3.15e-05 2.37e-13  2.03e-13    41s
  50   7.85410277e+02  7.85410058e+02  3.00e-05 4.07e-13  1.18e-13    42s
  51   7.85410277e+02  7.85410058e+02  3.00e-05 3.42e-13  1.12e-13    43s
  52   7.85409460e+02  7.85410058e+02  8.24e-05 3.11e-13  4.12e-13    43s

Barrier performed 52 iterations in 43.40 seconds (21.71 work units)
Sub-optimal termination - objective 7.85410447e+02

Optimization finished!
Restarting optimization for throughput iteration 1...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5730 rows, 2726 columns and 15619980 nonzeros
Model fingerprint: 0xb650c756
Coefficient statistics:
  Matrix range     [3e-12, 5e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [4e-06, 4e-06]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 6.97s
Presolved: 2726 rows, 8456 columns, 15622706 nonzeros
Ordering time: 0.08s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.51422640e+03  0.00000000e+00  0.00e+00 0.00e+00  9.67e-01    12s
   1   2.71258357e+03  5.59165520e+02  0.00e+00 1.85e-01  3.76e-01    12s
   2   1.72012648e+03  9.02652968e+02  0.00e+00 1.19e-01  1.88e-01    13s
   3   1.25740775e+03  9.82616869e+02  0.00e+00 7.90e-02  1.15e-01    13s
   4   1.04784901e+03  9.86195156e+02  0.00e+00 5.42e-02  7.51e-02    14s
   5   9.27491703e+02  9.34132768e+02  0.00e+00 4.10e-02  5.56e-02    14s
   6   8.20547597e+02  8.72545768e+02  0.00e+00 2.76e-02  3.53e-02    15s
   7   7.66803807e+02  8.41588897e+02  0.00e+00 2.25e-02  2.66e-02    16s
   8   7.50930377e+02  8.10877623e+02  0.00e+00 1.81e-02  2.17e-02    17s
   9   7.37023957e+02  7.91469876e+02  0.00e+00 1.52e-02  1.81e-02    17s
  10   7.30571427e+02  7.69529014e+02  0.00e+00 1.24e-02  1.53e-02    18s
  11   7.13973349e+02  7.57796320e+02  0.00e+00 1.10e-02  1.25e-02    19s
  12   6.97961655e+02  7.26914779e+02  0.00e+00 7.13e-03  7.77e-03    19s
  13   6.93379906e+02  7.14504331e+02  0.00e+00 5.59e-03  6.18e-03    20s
  14   6.88877284e+02  7.03719345e+02  0.00e+00 4.39e-03  4.83e-03    21s
  15   6.80979259e+02  6.96056274e+02  0.00e+00 3.48e-03  3.40e-03    22s
  16   6.77828798e+02  6.91383877e+02  0.00e+00 2.94e-03  2.75e-03    23s
  17   6.74116048e+02  6.84715253e+02  0.00e+00 2.20e-03  1.99e-03    24s
  18   6.70008166e+02  6.79090905e+02  0.00e+00 1.62e-03  1.34e-03    25s
  19   6.68029814e+02  6.73424824e+02  0.00e+00 1.06e-03  9.26e-04    25s
  20   6.66284134e+02  6.70202874e+02  0.00e+00 7.50e-04  6.58e-04    26s
  21   6.64926775e+02  6.68152151e+02  0.00e+00 5.64e-04  4.86e-04    27s
  22   6.64354378e+02  6.67146809e+02  0.00e+00 4.76e-04  4.07e-04    27s
  23   6.63818561e+02  6.65595326e+02  0.00e+00 3.43e-04  3.18e-04    28s
  24   6.62999622e+02  6.64640728e+02  0.00e+00 2.60e-04  2.18e-04    29s
  25   6.62306486e+02  6.63647201e+02  0.00e+00 1.79e-04  1.34e-04    29s
  26   6.62150086e+02  6.63175448e+02  0.00e+00 1.42e-04  1.10e-04    30s
  27   6.61809628e+02  6.62535841e+02  0.00e+00 9.10e-05  6.50e-05    31s
  28   6.61672519e+02  6.61955434e+02  0.00e+00 4.50e-05  3.91e-05    32s
  29   6.61509278e+02  6.61785738e+02  0.00e+00 3.16e-05  2.06e-05    33s
  30   6.61466607e+02  6.61606574e+02  0.00e+00 1.78e-05  1.30e-05    34s
  31   6.61441305e+02  6.61533639e+02  0.00e+00 1.21e-05  9.17e-06    35s
  32   6.61413233e+02  6.61481874e+02  9.76e-08 8.11e-06  5.53e-06    36s
  33   6.61398752e+02  6.61418619e+02  7.56e-07 3.21e-06  2.84e-06    37s
  34   6.61383714e+02  6.61384198e+02  1.66e-06 5.18e-07  7.04e-07    38s
  35   6.61382984e+02  6.61380632e+02  3.05e-06 2.37e-07  5.52e-07    39s
  36   6.61382901e+02  6.61380532e+02  2.61e-06 2.29e-07  5.42e-07    40s
  37   6.61381412e+02  6.61378989e+02  4.28e-06 1.07e-07  3.70e-07    41s
  38   6.61379497e+02  6.61377710e+02  8.28e-06 5.34e-09  1.64e-07    42s
  39   6.61379332e+02  6.61377660e+02  9.70e-06 1.72e-10  1.48e-07    44s
  40   6.61379239e+02  6.61377660e+02  1.31e-05 2.29e-11  1.37e-07    46s
  41   6.61378968e+02  6.61377654e+02  1.43e-05 1.94e-12  1.15e-07    47s
  42   6.61378850e+02  6.61377656e+02  1.50e-05 1.81e-12  1.00e-07    48s
  43   6.61378474e+02  6.61377660e+02  2.23e-05 2.26e-12  7.12e-08    48s
  44   6.61377713e+02  6.61377661e+02  1.95e-05 3.01e-13  4.55e-10    49s
  45   6.61377567e+02  6.61377662e+02  2.20e-05 3.18e-13  3.57e-10    51s
  46   6.61377549e+02  6.61377663e+02  1.39e-05 3.44e-13  9.18e-11    52s
  47   6.61377730e+02  6.61377663e+02  1.30e-05 2.54e-13  1.69e-12    53s
  48   6.61377585e+02  6.61377663e+02  4.07e-05 4.22e-13  8.97e-13    54s
  49   6.61377672e+02  6.61377663e+02  2.73e-05 6.71e-13  5.59e-14    54s
  50   6.61377003e+02  6.61377663e+02  7.67e-05 3.83e-12  6.64e-14    55s
  51   6.61377091e+02  6.61377663e+02  5.29e-05 1.17e-12  1.96e-12    56s

Barrier performed 51 iterations in 56.32 seconds (26.31 work units)
Sub-optimal termination - objective 6.61382984e+02

/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/drivers/11_USORT_N128_FPM390M0150_IWA0380_OWA01400_C10_BW20_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:102: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  dark_zone_mask = circular_aperture(img_owa * 2)(focal_grid) - circular_aperture(img_iwa * 2)(focal_grid)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/drivers/11_USORT_N128_FPM390M0150_IWA0380_OWA01400_C10_BW20_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:110: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  focal_plane_mask = 1 - evaluate_supersampled(circular_aperture(2 * fpm_radius), focal_mask_grid, 8)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/drivers/11_USORT_N128_FPM390M0150_IWA0380_OWA01400_C10_BW20_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:118: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  field_stop = circular_aperture(2 * field_stop_radius)(field_stop_grid)
WARNING: VerifyWarning: Keyword name 'LS_ALIGN_TOl' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'LS_NUM_STOPS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_START' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_EDGE' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ITER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ESTIM' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'MAX_THRPT' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_THRDS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_XOVER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
Optimization finished!
