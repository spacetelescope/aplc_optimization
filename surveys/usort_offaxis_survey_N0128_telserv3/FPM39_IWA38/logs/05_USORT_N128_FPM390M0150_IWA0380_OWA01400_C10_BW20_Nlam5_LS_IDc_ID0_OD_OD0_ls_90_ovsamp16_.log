Optimizer called with the following parameters:
{'focal_plane_mask': {'field_stop_radius': 14.5,
                      'grayscale': True,
                      'num_pix': 150,
                      'radius': 3.9000000000000004},
 'image': {'bandwidth': 0.2,
           'contrast': 10,
           'iwa': 3.8000000000000003,
           'num_wavelengths': 5,
           'owa': 14.0,
           'resolution': 2},
 'instrument': {'inst_name': 'USORT'},
 'lyot_stop': {'alignment_tolerance': 0,
               'filename': 'USORT/LS_USORT_circ_ID0000_OD0990_ovsamp16_N0128.fits',
               'num_lyot_stops': 1},
 'method': {'edge_width_for_prior': 2,
            'ending_scale': 1,
            'force_no_hermitian_symmetry': False,
            'force_no_x_mirror_symmetry': False,
            'force_no_y_mirror_symmetry': False,
            'initial_throughput_estimate': 1,
            'maximize_planet_throughput': True,
            'num_throughput_iterations': 2,
            'starting_scale': 1},
 'pupil': {'N': 128,
           'filename': 'USORT/TelAp_USORT_offaxis_ovsamp16_N0128.fits'},
 'solver': {'crossover': 0,
            'method': 2,
            'num_threads': 0}}

File organization:
{'analysis_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/analysis',
 'drivers_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/drivers',
 'input_files_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/masks',
 'log_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/logs',
 'solution_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/solutions',
 'survey_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38'}

Telescope pupil:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Lyot stop #0:
   Mirror symmetry in x: yes
Lyot stop #0:
   Mirror symmetry in y: yes

Complete APLC:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Starting optimization at scale 1 with 2726 variables and 2865 constraints.
Creating model...
Set parameter Username
Academic license - for non-commercial use only - expires 2024-10-25
Set parameter Crossover to value 0
Set parameter Method to value 2
Calculating and adding constraints...
Wavelength 1/5; Variable 1000/2726
Wavelength 1/5; Variable 2000/2726
Wavelength 2/5; Variable 1000/2726
Wavelength 2/5; Variable 2000/2726
Wavelength 3/5; Variable 1000/2726
Wavelength 3/5; Variable 2000/2726
Wavelength 4/5; Variable 1000/2726
Wavelength 4/5; Variable 2000/2726
Wavelength 5/5; Variable 1000/2726
Wavelength 5/5; Variable 2000/2726
Start optimization...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5730 rows, 2726 columns and 15619980 nonzeros
Model fingerprint: 0xf5372c09
Coefficient statistics:
  Matrix range     [5e-12, 5e-04]
  Objective range  [2e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e-05, 1e-05]
Presolve removed 0 rows and 0 columns (presolve time = 5s) ...
Presolve time: 10.05s
Presolved: 2726 rows, 8456 columns, 15622706 nonzeros
Error: invalid user locale; possible fix is to set the system environment
       variable 'LC_ALL' to a valid locale (e.g., to 'C')
Ordering time: 0.18s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.59004804e+03  0.00000000e+00  0.00e+00 0.00e+00  9.77e-01    17s
   1   2.66718850e+03  6.37374832e+02  0.00e+00 1.53e-01  3.29e-01    19s
   2   1.96541149e+03  8.49564943e+02  0.00e+00 1.09e-01  2.04e-01    22s
   3   1.28991254e+03  9.41275589e+02  0.00e+00 6.01e-02  9.61e-02    25s
   4   1.11671547e+03  9.55638765e+02  0.00e+00 4.26e-02  6.22e-02    28s
   5   1.02025553e+03  9.27025134e+02  0.00e+00 3.01e-02  4.26e-02    30s
   6   9.30738695e+02  9.15114926e+02  0.00e+00 2.63e-02  3.13e-02    34s
   7   8.84974801e+02  8.85717381e+02  0.00e+00 1.91e-02  2.15e-02    37s
   8   8.54532599e+02  8.71439971e+02  0.00e+00 1.62e-02  1.65e-02    39s
   9   8.33756251e+02  8.58921345e+02  0.00e+00 1.37e-02  1.27e-02    41s
  10   8.23928748e+02  8.49245063e+02  0.00e+00 1.18e-02  1.04e-02    43s
  11   8.13764871e+02  8.36607792e+02  0.00e+00 9.29e-03  7.89e-03    45s
  12   8.04427802e+02  8.26867788e+02  0.00e+00 7.58e-03  5.97e-03    47s
  13   7.98845005e+02  8.20176119e+02  0.00e+00 6.42e-03  4.85e-03    49s
  14   7.94450470e+02  8.12068578e+02  0.00e+00 5.12e-03  3.80e-03    52s
  15   7.90461250e+02  8.06574435e+02  0.00e+00 4.27e-03  3.03e-03    55s
  16   7.87743975e+02  8.01925365e+02  0.00e+00 3.56e-03  2.45e-03    56s
  17   7.83821505e+02  7.95637313e+02  0.00e+00 2.61e-03  1.68e-03    58s
  18   7.80733357e+02  7.90816447e+02  0.00e+00 1.89e-03  1.10e-03    62s
  19   7.79520253e+02  7.89233903e+02  0.00e+00 1.67e-03  9.18e-04    63s
  20   7.78563615e+02  7.86297938e+02  0.00e+00 1.29e-03  6.98e-04    66s
  21   7.77817897e+02  7.82322616e+02  0.00e+00 7.57e-04  4.14e-04    69s
  22   7.77368541e+02  7.80881049e+02  0.00e+00 5.84e-04  3.18e-04    71s
  23   7.76797688e+02  7.79254065e+02  0.00e+00 3.89e-04  2.04e-04    75s
  24   7.76321489e+02  7.78020898e+02  0.00e+00 2.43e-04  1.14e-04    77s
  25   7.76160430e+02  7.76929217e+02  0.00e+00 1.14e-04  5.58e-05    80s
  26   7.76091120e+02  7.76651955e+02  0.00e+00 8.13e-05  3.91e-05    81s
  27   7.76009624e+02  7.76282674e+02  0.00e+00 3.82e-05  1.76e-05    84s
  28   7.75984592e+02  7.76147489e+02  0.00e+00 2.24e-05  1.01e-05    87s
  29   7.75973830e+02  7.76025510e+02  0.00e+00 8.23e-06  4.45e-06    90s
  30   7.75967436e+02  7.75991918e+02  8.12e-07 4.21e-06  2.45e-06    92s
  31   7.75961749e+02  7.75975332e+02  2.79e-07 2.23e-06  1.25e-06    96s
  32   7.75959678e+02  7.75963441e+02  3.62e-07 8.03e-07  5.49e-07    99s
  33   7.75957581e+02  7.75958996e+02  5.08e-07 2.64e-07  1.65e-07   104s
  34   7.75956954e+02  7.75957464e+02  1.57e-07 7.71e-08  3.95e-08   110s
  35   7.75956899e+02  7.75957196e+02  7.23e-08 4.39e-08  2.18e-08   115s
  36   7.75956898e+02  7.75956977e+02  1.08e-07 1.66e-08  1.13e-08   119s
  37   7.75956846e+02  7.75956845e+02  9.89e-09 3.23e-13  8.99e-11   128s

Barrier solved model in 37 iterations and 128.02 seconds (19.58 work units)
Optimal objective 7.75956846e+02

Optimization finished!
Restarting optimization for throughput iteration 1...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5730 rows, 2726 columns and 15619980 nonzeros
Model fingerprint: 0x07728775
Coefficient statistics:
  Matrix range     [5e-12, 5e-04]
  Objective range  [2e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [4e-06, 4e-06]
Presolve removed 0 rows and 0 columns (presolve time = 8s) ...
Presolve removed 0 rows and 0 columns (presolve time = 11s) ...
Presolve time: 13.24s
Presolved: 2726 rows, 8456 columns, 15622706 nonzeros
Ordering time: 0.11s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.50817275e+03  0.00000000e+00  0.00e+00 0.00e+00  9.67e-01    20s
   1   2.58663625e+03  6.26066454e+02  0.00e+00 1.55e-01  3.29e-01    22s
   2   1.85878065e+03  8.12727672e+02  0.00e+00 1.15e-01  2.13e-01    25s
   3   1.18842023e+03  8.99524019e+02  0.00e+00 5.98e-02  1.00e-01    28s
   4   9.26013061e+02  8.83528798e+02  0.00e+00 4.56e-02  6.56e-02    29s
   5   8.47962489e+02  8.52706290e+02  0.00e+00 3.46e-02  4.82e-02    31s
   6   8.01449416e+02  8.21572261e+02  0.00e+00 2.74e-02  3.77e-02    33s
   7   7.40968302e+02  8.04482434e+02  0.00e+00 2.29e-02  2.78e-02    35s
   8   7.27921271e+02  7.75254152e+02  0.00e+00 1.75e-02  2.15e-02    38s
   9   7.15540264e+02  7.60568261e+02  0.00e+00 1.48e-02  1.78e-02    40s
  10   7.05562272e+02  7.44161057e+02  0.00e+00 1.20e-02  1.41e-02    42s
  11   7.01806738e+02  7.32378158e+02  0.00e+00 1.01e-02  1.19e-02    46s
  12   6.90894739e+02  7.21881511e+02  0.00e+00 8.31e-03  8.82e-03    48s
  13   6.84567243e+02  7.12315791e+02  0.00e+00 6.81e-03  6.81e-03    51s
  14   6.80983290e+02  7.02354272e+02  0.00e+00 5.36e-03  5.26e-03    52s
  15   6.78070708e+02  6.98234045e+02  0.00e+00 4.77e-03  4.47e-03    55s
  16   6.75563655e+02  6.89022179e+02  0.00e+00 3.47e-03  3.29e-03    57s
  17   6.71555990e+02  6.81678395e+02  0.00e+00 2.42e-03  2.14e-03    59s
  18   6.68751196e+02  6.76107898e+02  0.00e+00 1.67e-03  1.42e-03    63s
  19   6.66398617e+02  6.72149084e+02  0.00e+00 1.17e-03  9.21e-04    65s
  20   6.65341708e+02  6.69544416e+02  0.00e+00 8.67e-04  6.62e-04    67s
  21   6.64792493e+02  6.68351507e+02  0.00e+00 7.05e-04  5.47e-04    70s
  22   6.64122134e+02  6.67197303e+02  0.00e+00 5.72e-04  4.29e-04    72s
  23   6.63610337e+02  6.66044075e+02  0.00e+00 4.40e-04  3.30e-04    74s
  24   6.63228110e+02  6.65095343e+02  0.00e+00 3.34e-04  2.50e-04    77s
  25   6.62777202e+02  6.64959078e+02  0.00e+00 3.18e-04  2.07e-04    80s
  26   6.62554759e+02  6.64436268e+02  0.00e+00 2.63e-04  1.66e-04    82s
  27   6.62377639e+02  6.63891646e+02  0.00e+00 2.06e-04  1.28e-04    84s
  28   6.62333825e+02  6.63659130e+02  0.00e+00 1.82e-04  1.15e-04    86s
  29   6.62189755e+02  6.63153916e+02  0.00e+00 1.28e-04  7.90e-05    89s
  30   6.62110015e+02  6.62938748e+02  0.00e+00 1.06e-04  6.32e-05    91s
  31   6.62069423e+02  6.62754040e+02  0.00e+00 8.80e-05  5.28e-05    94s
  32   6.62030139e+02  6.62605715e+02  0.00e+00 7.33e-05  4.38e-05    96s
  33   6.62018547e+02  6.62509965e+02  0.00e+00 6.38e-05  3.91e-05    98s
  34   6.61992943e+02  6.62380302e+02  0.00e+00 5.11e-05  3.20e-05   100s
  35   6.61959520e+02  6.62314682e+02  0.00e+00 4.44e-05  2.62e-05   103s
  36   6.61921836e+02  6.62155939e+02  0.00e+00 2.87e-05  1.67e-05   106s
  37   6.61901685e+02  6.62029542e+02  0.00e+00 1.62e-05  9.72e-06   109s
  38   6.61892955e+02  6.61976733e+02  0.00e+00 1.10e-05  6.93e-06   111s
  39   6.61882497e+02  6.61925914e+02  0.00e+00 6.11e-06  4.11e-06   113s
  40   6.61877594e+02  6.61899342e+02  2.46e-08 3.50e-06  2.63e-06   113s
  41   6.61871632e+02  6.61869938e+02  1.13e-07 6.37e-07  9.85e-07   115s
  42   6.61868839e+02  6.61867063e+02  8.19e-08 3.50e-07  6.17e-07   117s
  43   6.61865085e+02  6.61865217e+02  9.58e-08 1.69e-07  2.10e-07   118s
  44   6.61863753e+02  6.61863798e+02  1.22e-07 2.32e-08  2.66e-08   119s
  45   6.61863583e+02  6.61863619e+02  2.12e-08 3.96e-09  2.00e-09   121s
  46   6.61863582e+02  6.61863582e+02  4.15e-09 3.19e-13  5.38e-11   123s

Barrier solved model in 46 iterations and 123.40 seconds (22.78 work units)
Optimal objective 6.61863582e+02

/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/drivers/05_USORT_N128_FPM390M0150_IWA0380_OWA01400_C10_BW20_Nlam5_LS_IDc_ID0_OD_OD0_ls_90_ovsamp16_.py:102: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  dark_zone_mask = circular_aperture(img_owa * 2)(focal_grid) - circular_aperture(img_iwa * 2)(focal_grid)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/drivers/05_USORT_N128_FPM390M0150_IWA0380_OWA01400_C10_BW20_Nlam5_LS_IDc_ID0_OD_OD0_ls_90_ovsamp16_.py:110: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  focal_plane_mask = 1 - evaluate_supersampled(circular_aperture(2 * fpm_radius), focal_mask_grid, 8)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/drivers/05_USORT_N128_FPM390M0150_IWA0380_OWA01400_C10_BW20_Nlam5_LS_IDc_ID0_OD_OD0_ls_90_ovsamp16_.py:118: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  field_stop = circular_aperture(2 * field_stop_radius)(field_stop_grid)
WARNING: VerifyWarning: Keyword name 'LS_ALIGN_TOl' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'LS_NUM_STOPS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_START' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_EDGE' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ITER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ESTIM' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'MAX_THRPT' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_THRDS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_XOVER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
Optimization finished!
