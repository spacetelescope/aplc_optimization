Optimizer called with the following parameters:
{'focal_plane_mask': {'field_stop_radius': 14.5,
                      'grayscale': True,
                      'num_pix': 150,
                      'radius': 3.9000000000000004},
 'image': {'bandwidth': 0.15,
           'contrast': 10,
           'iwa': 3.8000000000000003,
           'num_wavelengths': 5,
           'owa': 14.0,
           'resolution': 2},
 'instrument': {'inst_name': 'USORT'},
 'lyot_stop': {'alignment_tolerance': 0,
               'filename': 'USORT/LS_USORT_hex_ID0000_OD0990_ovsamp16_N0128.fits',
               'num_lyot_stops': 1},
 'method': {'edge_width_for_prior': 2,
            'ending_scale': 1,
            'force_no_hermitian_symmetry': False,
            'force_no_x_mirror_symmetry': False,
            'force_no_y_mirror_symmetry': False,
            'initial_throughput_estimate': 1,
            'maximize_planet_throughput': True,
            'num_throughput_iterations': 2,
            'starting_scale': 1},
 'pupil': {'N': 128,
           'filename': 'USORT/TelAp_USORT_offaxis_ovsamp16_N0128.fits'},
 'solver': {'crossover': 0,
            'method': 2,
            'num_threads': 0}}

File organization:
{'analysis_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/analysis',
 'drivers_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/drivers',
 'input_files_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/masks',
 'log_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/logs',
 'solution_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/solutions',
 'survey_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38'}

Telescope pupil:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Lyot stop #0:
   Mirror symmetry in x: yes
Lyot stop #0:
   Mirror symmetry in y: yes

Complete APLC:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Starting optimization at scale 1 with 2726 variables and 2865 constraints.
Creating model...
Set parameter Username
Academic license - for non-commercial use only - expires 2024-10-25
Set parameter Crossover to value 0
Set parameter Method to value 2
Calculating and adding constraints...
Wavelength 1/5; Variable 1000/2726
Wavelength 1/5; Variable 2000/2726
Wavelength 2/5; Variable 1000/2726
Wavelength 2/5; Variable 2000/2726
Wavelength 3/5; Variable 1000/2726
Wavelength 3/5; Variable 2000/2726
Wavelength 4/5; Variable 1000/2726
Wavelength 4/5; Variable 2000/2726
Wavelength 5/5; Variable 1000/2726
Wavelength 5/5; Variable 2000/2726
Start optimization...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5730 rows, 2726 columns and 15619980 nonzeros
Model fingerprint: 0x8ea5c66a
Coefficient statistics:
  Matrix range     [1e-11, 6e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e-05, 1e-05]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 6.39s
Presolved: 2726 rows, 8456 columns, 15622706 nonzeros
Error: invalid user locale; possible fix is to set the system environment
       variable 'LC_ALL' to a valid locale (e.g., to 'C')
Ordering time: 0.05s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.47216346e+03  0.00000000e+00  0.00e+00 0.00e+00  9.53e-01     9s
   1   2.86815692e+03  5.91664051e+02  0.00e+00 1.68e-01  3.58e-01    10s
   2   1.96340477e+03  9.77673701e+02  0.00e+00 1.04e-01  1.77e-01    12s
   3   1.60503998e+03  1.09398805e+03  0.00e+00 7.34e-02  1.14e-01    14s
   4   1.30956295e+03  1.13066377e+03  0.00e+00 5.46e-02  7.32e-02    16s
   5   1.22274701e+03  1.13468799e+03  0.00e+00 4.37e-02  5.67e-02    18s
   6   1.16233182e+03  1.11912788e+03  0.00e+00 3.24e-02  4.16e-02    19s
   7   1.08277937e+03  1.10418396e+03  0.00e+00 2.83e-02  3.31e-02    21s
   8   1.03781292e+03  1.08043317e+03  0.00e+00 2.42e-02  2.73e-02    23s
   9   1.02446603e+03  1.06776799e+03  0.00e+00 2.23e-02  2.51e-02    25s
  10   9.94210786e+02  1.04762507e+03  0.00e+00 1.94e-02  2.11e-02    27s
  11   9.58572621e+02  1.02364387e+03  0.00e+00 1.63e-02  1.68e-02    29s
  12   9.26188676e+02  9.80278665e+02  0.00e+00 1.09e-02  1.07e-02    31s
  13   9.13957696e+02  9.67394839e+02  0.00e+00 9.57e-03  8.87e-03    32s
  14   9.08658970e+02  9.57447950e+02  0.00e+00 8.55e-03  7.83e-03    34s
  15   9.01334242e+02  9.30339649e+02  0.00e+00 5.79e-03  5.64e-03    35s
  16   8.95618119e+02  9.22449966e+02  0.00e+00 5.05e-03  4.80e-03    37s
  17   8.89184180e+02  9.16527673e+02  0.00e+00 4.50e-03  3.97e-03    39s
  18   8.80430631e+02  9.02217770e+02  0.00e+00 3.16e-03  2.54e-03    42s
  19   8.76150720e+02  8.93412082e+02  0.00e+00 2.37e-03  1.84e-03    44s
  20   8.73161064e+02  8.88778066e+02  0.00e+00 1.97e-03  1.42e-03    46s
  21   8.70394008e+02  8.82287683e+02  0.00e+00 1.40e-03  9.49e-04    48s
  22   8.68816990e+02  8.78552670e+02  0.00e+00 1.09e-03  6.95e-04    49s
  23   8.67755309e+02  8.74283694e+02  0.00e+00 7.29e-04  4.68e-04    52s
  24   8.66733513e+02  8.70750452e+02  0.00e+00 4.32e-04  2.65e-04    53s
  25   8.66202599e+02  8.68553515e+02  0.00e+00 2.55e-04  1.59e-04    55s
  26   8.65925447e+02  8.67714782e+02  0.00e+00 1.88e-04  1.13e-04    56s
  27   8.65652411e+02  8.67104950e+02  0.00e+00 1.39e-04  7.26e-05    59s
  28   8.65553160e+02  8.66586418e+02  0.00e+00 9.78e-05  5.06e-05    60s
  29   8.65457436e+02  8.66094503e+02  0.00e+00 5.89e-05  2.93e-05    62s
  30   8.65417711e+02  8.65850674e+02  0.00e+00 3.89e-05  1.83e-05    65s
  31   8.65394033e+02  8.65750078e+02  0.00e+00 3.10e-05  1.37e-05    67s
  32   8.65378524e+02  8.65617409e+02  0.00e+00 2.07e-05  9.03e-06    68s
  33   8.65372042e+02  8.65492987e+02  0.00e+00 1.10e-05  5.37e-06    69s
  34   8.65366955e+02  8.65462228e+02  0.00e+00 8.62e-06  4.14e-06    72s
  35   8.65363015e+02  8.65410117e+02  4.21e-07 4.54e-06  2.46e-06    73s
  36   8.65358569e+02  8.65374227e+02  1.16e-06 1.70e-06  1.09e-06    76s
  37   8.65353719e+02  8.65352716e+02  6.40e-07 3.54e-08  1.42e-07    79s
  38   8.65353109e+02  8.65352332e+02  7.99e-07 1.85e-09  7.17e-08    86s
  39   8.65353060e+02  8.65352314e+02  1.36e-06 1.79e-10  6.70e-08    91s
  40   8.65352987e+02  8.65352311e+02  1.68e-06 3.99e-13  6.24e-08    96s
  41   8.65352905e+02  8.65352312e+02  3.51e-06 4.27e-13  5.34e-08   106s
  42   8.65352480e+02  8.65352311e+02  2.30e-05 4.11e-13  2.28e-08   109s
  43   8.65352187e+02  8.65352312e+02  1.37e-05 4.94e-13  1.17e-10   113s
  44   8.65352296e+02  8.65352313e+02  2.08e-05 4.01e-13  4.54e-12   114s
  45   8.65352200e+02  8.65352313e+02  3.16e-05 3.48e-13  6.69e-14   116s
  46   8.65352386e+02  8.65352313e+02  1.86e-05 3.39e-13  2.71e-15   118s
  47   8.65352447e+02  8.65352313e+02  2.01e-05 2.38e-13  8.05e-16   119s
  48   8.65352437e+02  8.65352313e+02  2.22e-05 2.52e-13  6.77e-20   121s

Barrier performed 48 iterations in 120.64 seconds (22.94 work units)
Sub-optimal termination - objective 8.65353719e+02

Optimization finished!
Restarting optimization for throughput iteration 1...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5730 rows, 2726 columns and 15619980 nonzeros
Model fingerprint: 0x6d04f632
Coefficient statistics:
  Matrix range     [1e-11, 6e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [4e-06, 4e-06]
Presolve removed 0 rows and 0 columns (presolve time = 5s) ...
Presolve time: 9.89s
Presolved: 2726 rows, 8456 columns, 15622706 nonzeros
Ordering time: 0.10s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.39962719e+03  0.00000000e+00  0.00e+00 0.00e+00  9.44e-01    15s
   1   2.79848145e+03  5.75202255e+02  0.00e+00 1.72e-01  3.61e-01    17s
   2   1.89868948e+03  9.39501270e+02  0.00e+00 1.11e-01  1.86e-01    19s
   3   1.52864134e+03  1.05668258e+03  0.00e+00 8.01e-02  1.24e-01    22s
   4   1.23606109e+03  1.07985424e+03  0.00e+00 5.97e-02  8.42e-02    24s
   5   1.10731652e+03  1.06105120e+03  0.00e+00 4.84e-02  6.74e-02    26s
   6   9.73579177e+02  1.03612564e+03  0.00e+00 4.09e-02  5.31e-02    28s
   7   9.07499242e+02  1.00162522e+03  0.00e+00 3.28e-02  4.16e-02    30s
   8   8.69383594e+02  9.72057466e+02  0.00e+00 2.82e-02  3.52e-02    33s
   9   8.58834140e+02  9.66818880e+02  0.00e+00 2.73e-02  3.37e-02    34s
  10   8.43983647e+02  9.57217640e+02  0.00e+00 2.60e-02  3.17e-02    36s
  11   8.01393506e+02  9.37630819e+02  0.00e+00 2.33e-02  2.64e-02    38s
  12   7.78962956e+02  8.96263365e+02  0.00e+00 1.78e-02  1.96e-02    41s
  13   7.62373976e+02  8.76479409e+02  0.00e+00 1.56e-02  1.64e-02    44s
  14   7.52788041e+02  8.54493157e+02  0.00e+00 1.33e-02  1.36e-02    45s
  15   7.43686938e+02  8.38198680e+02  0.00e+00 1.17e-02  1.15e-02    46s
  16   7.40716993e+02  8.26000998e+02  0.00e+00 1.04e-02  1.02e-02    48s
  17   7.34799645e+02  8.21731310e+02  0.00e+00 9.95e-03  9.44e-03    50s
  18   7.30781806e+02  7.98909308e+02  0.00e+00 7.81e-03  7.42e-03    53s
  19   7.25124600e+02  7.87704649e+02  0.00e+00 6.83e-03  6.19e-03    55s
  20   7.23849868e+02  7.81863298e+02  0.00e+00 6.31e-03  5.66e-03    57s
  21   7.20807060e+02  7.70564606e+02  0.00e+00 5.30e-03  4.61e-03    60s
  22   7.19538437e+02  7.62097631e+02  0.00e+00 4.59e-03  4.02e-03    62s
  23   7.16164358e+02  7.52108809e+02  0.00e+00 3.73e-03  3.10e-03    65s
  24   7.12507030e+02  7.44127509e+02  0.00e+00 3.05e-03  2.31e-03    67s
  25   7.10953688e+02  7.38588644e+02  0.00e+00 2.62e-03  1.92e-03    70s
  26   7.10182808e+02  7.36249606e+02  0.00e+00 2.43e-03  1.77e-03    71s
  27   7.08801428e+02  7.29952073e+02  0.00e+00 1.95e-03  1.42e-03    73s
  28   7.07190807e+02  7.23304763e+02  0.00e+00 1.44e-03  1.02e-03    76s
  29   7.06452455e+02  7.19863469e+02  0.00e+00 1.20e-03  8.53e-04    78s
  30   7.06022705e+02  7.17193620e+02  0.00e+00 1.01e-03  7.38e-04    80s
  31   7.05594536e+02  7.16283841e+02  0.00e+00 9.45e-04  6.78e-04    82s
  32   7.04808304e+02  7.14885665e+02  0.00e+00 8.43e-04  5.67e-04    84s
  33   7.04248272e+02  7.12004984e+02  0.00e+00 6.44e-04  4.35e-04    88s
  34   7.03604239e+02  7.10665746e+02  0.00e+00 5.53e-04  3.48e-04    90s
  35   7.03308398e+02  7.09370924e+02  0.00e+00 4.66e-04  2.92e-04    92s
  36   7.03128685e+02  7.07890960e+02  0.00e+00 3.72e-04  2.39e-04    94s
  37   7.02723886e+02  7.06966488e+02  0.00e+00 3.12e-04  1.84e-04    97s
  38   7.02373276e+02  7.05312384e+02  0.00e+00 2.06e-04  1.11e-04   100s
  39   7.02275843e+02  7.04107019e+02  0.00e+00 1.30e-04  7.30e-05   102s
  40   7.02228584e+02  7.03810546e+02  0.00e+00 1.12e-04  6.19e-05   104s
  41   7.02176375e+02  7.03419873e+02  0.00e+00 8.70e-05  4.77e-05   106s
  42   7.02151493e+02  7.02789750e+02  0.00e+00 4.73e-05  2.93e-05   109s
  43   7.02109365e+02  7.02449514e+02  0.00e+00 2.60e-05  1.72e-05   111s
  44   7.02058440e+02  7.02342092e+02  0.00e+00 1.93e-05  1.00e-05   114s
  45   7.02050216e+02  7.02280963e+02  0.00e+00 1.55e-05  7.87e-06   115s
  46   7.02044923e+02  7.02218531e+02  0.00e+00 1.16e-05  5.79e-06   118s
  47   7.02034185e+02  7.02093930e+02  1.26e-06 3.98e-06  1.96e-06   121s
  48   7.02030781e+02  7.02058788e+02  1.28e-06 1.82e-06  8.32e-07   124s
  49   7.02029648e+02  7.02044854e+02  2.37e-07 9.57e-07  3.97e-07   126s
  50   7.02029532e+02  7.02031846e+02  1.06e-07 1.53e-07  7.41e-08   130s
  51   7.02029448e+02  7.02030557e+02  6.76e-08 7.16e-08  3.23e-08   135s
  52   7.02029440e+02  7.02029531e+02  5.42e-08 6.79e-09  4.37e-09   139s
  53   7.02029440e+02  7.02029482e+02  6.90e-08 3.53e-09  2.75e-09   143s
  54   7.02029441e+02  7.02029425e+02  8.32e-08 3.26e-13  1.35e-09   147s
  55   7.02029441e+02  7.02029429e+02  1.88e-07 5.91e-13  1.02e-09   150s
  56   7.02029475e+02  7.02029429e+02  9.12e-06 8.52e-13  3.22e-10   151s
  57   7.02029446e+02  7.02029429e+02  1.64e-05 4.15e-13  1.38e-11   153s
  58   7.02029257e+02  7.02029429e+02  2.23e-05 4.42e-13  2.16e-13   154s
  59   7.02029496e+02  7.02029429e+02  3.04e-05 4.36e-13  3.40e-14   155s
  60   7.02029388e+02  7.02029429e+02  1.27e-05 2.65e-13  2.93e-15   157s
  61   7.02029285e+02  7.02029429e+02  9.85e-05 2.73e-13  7.92e-15   159s
  62   7.02029303e+02  7.02029429e+02  8.06e-05 7.99e-13  4.01e-12   162s

Barrier solved model in 62 iterations and 162.30 seconds (25.06 work units)
Optimal objective 7.02029440e+02

/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/drivers/10_USORT_N128_FPM390M0150_IWA0380_OWA01400_C10_BW15_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:102: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  dark_zone_mask = circular_aperture(img_owa * 2)(focal_grid) - circular_aperture(img_iwa * 2)(focal_grid)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/drivers/10_USORT_N128_FPM390M0150_IWA0380_OWA01400_C10_BW15_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:110: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  focal_plane_mask = 1 - evaluate_supersampled(circular_aperture(2 * fpm_radius), focal_mask_grid, 8)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM39_IWA38/drivers/10_USORT_N128_FPM390M0150_IWA0380_OWA01400_C10_BW15_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:118: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  field_stop = circular_aperture(2 * field_stop_radius)(field_stop_grid)
WARNING: VerifyWarning: Keyword name 'LS_ALIGN_TOl' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'LS_NUM_STOPS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_START' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_EDGE' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ITER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ESTIM' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'MAX_THRPT' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_THRDS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_XOVER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
Optimization finished!
