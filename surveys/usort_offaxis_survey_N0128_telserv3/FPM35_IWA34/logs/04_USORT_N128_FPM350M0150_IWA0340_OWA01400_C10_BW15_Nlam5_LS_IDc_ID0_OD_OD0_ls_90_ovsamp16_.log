Optimizer called with the following parameters:
{'focal_plane_mask': {'field_stop_radius': 14.5,
                      'grayscale': True,
                      'num_pix': 150,
                      'radius': 3.5},
 'image': {'bandwidth': 0.15,
           'contrast': 10,
           'iwa': 3.4,
           'num_wavelengths': 5,
           'owa': 14.0,
           'resolution': 2},
 'instrument': {'inst_name': 'USORT'},
 'lyot_stop': {'alignment_tolerance': 0,
               'filename': 'USORT/LS_USORT_circ_ID0000_OD0990_ovsamp16_N0128.fits',
               'num_lyot_stops': 1},
 'method': {'edge_width_for_prior': 2,
            'ending_scale': 1,
            'force_no_hermitian_symmetry': False,
            'force_no_x_mirror_symmetry': False,
            'force_no_y_mirror_symmetry': False,
            'initial_throughput_estimate': 1,
            'maximize_planet_throughput': True,
            'num_throughput_iterations': 2,
            'starting_scale': 1},
 'pupil': {'N': 128,
           'filename': 'USORT/TelAp_USORT_offaxis_ovsamp16_N0128.fits'},
 'solver': {'crossover': 0,
            'method': 2,
            'num_threads': 0}}

File organization:
{'analysis_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM35_IWA34/analysis',
 'drivers_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM35_IWA34/drivers',
 'input_files_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/masks',
 'log_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM35_IWA34/logs',
 'solution_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM35_IWA34/solutions',
 'survey_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM35_IWA34'}

Telescope pupil:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Lyot stop #0:
   Mirror symmetry in x: yes
Lyot stop #0:
   Mirror symmetry in y: yes

Complete APLC:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Starting optimization at scale 1 with 2726 variables and 2905 constraints.
Creating model...
Set parameter Username
Academic license - for non-commercial use only - expires 2024-10-25
Set parameter Crossover to value 0
Set parameter Method to value 2
Calculating and adding constraints...
Wavelength 1/5; Variable 1000/2726
Wavelength 1/5; Variable 2000/2726
Wavelength 2/5; Variable 1000/2726
Wavelength 2/5; Variable 2000/2726
Wavelength 3/5; Variable 1000/2726
Wavelength 3/5; Variable 2000/2726
Wavelength 4/5; Variable 1000/2726
Wavelength 4/5; Variable 2000/2726
Wavelength 5/5; Variable 1000/2726
Wavelength 5/5; Variable 2000/2726
Start optimization...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5810 rows, 2726 columns and 15838060 nonzeros
Model fingerprint: 0x764e9946
Coefficient statistics:
  Matrix range     [8e-12, 5e-04]
  Objective range  [2e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e-05, 1e-05]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 7.23s
Presolved: 2726 rows, 8536 columns, 15840786 nonzeros
Error: invalid user locale; possible fix is to set the system environment
       variable 'LC_ALL' to a valid locale (e.g., to 'C')
Ordering time: 0.07s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.46041926e+03  0.00000000e+00  0.00e+00 0.00e+00  9.49e-01    11s
   1   2.60092189e+03  5.35675145e+02  0.00e+00 1.95e-01  3.67e-01    11s
   2   1.65960431e+03  8.00349712e+02  0.00e+00 1.18e-01  1.91e-01    12s
   3   1.28794861e+03  8.42532846e+02  0.00e+00 7.35e-02  1.12e-01    13s
   4   1.04669430e+03  8.39531351e+02  0.00e+00 5.41e-02  7.21e-02    14s
   5   9.48092946e+02  8.22632117e+02  0.00e+00 4.04e-02  5.01e-02    15s
   6   8.56079701e+02  8.09920019e+02  0.00e+00 3.29e-02  3.36e-02    16s
   7   8.21349804e+02  7.94304434e+02  0.00e+00 2.41e-02  2.27e-02    17s
   8   7.96421171e+02  7.81257705e+02  0.00e+00 1.76e-02  1.49e-02    17s
   9   7.85193979e+02  7.72348216e+02  0.00e+00 1.34e-02  1.09e-02    18s
  10   7.73956630e+02  7.66199348e+02  0.00e+00 1.06e-02  7.97e-03    19s
  11   7.65162360e+02  7.59179008e+02  0.00e+00 7.44e-03  5.49e-03    20s
  12   7.55600016e+02  7.51586692e+02  0.00e+00 4.40e-03  3.13e-03    21s
  13   7.49630393e+02  7.47620066e+02  0.00e+00 2.87e-03  1.92e-03    22s
  14   7.45833403e+02  7.46176809e+02  0.00e+00 2.33e-03  1.34e-03    22s
  15   7.43266198e+02  7.43607583e+02  0.00e+00 1.38e-03  7.67e-04    23s
  16   7.41832567e+02  7.41997860e+02  0.00e+00 8.84e-04  4.65e-04    24s
  17   7.40555185e+02  7.41142351e+02  0.00e+00 5.57e-04  2.65e-04    24s
  18   7.40107772e+02  7.40145675e+02  0.00e+00 2.36e-04  1.31e-04    25s
  19   7.39998628e+02  7.39999161e+02  0.00e+00 1.89e-04  1.08e-04    26s
  20   7.39750649e+02  7.39773293e+02  0.00e+00 1.16e-04  6.41e-05    27s
  21   7.39596567e+02  7.39566913e+02  0.00e+00 4.84e-05  3.04e-05    28s
  22   7.39512375e+02  7.39494747e+02  0.00e+00 2.57e-05  1.63e-05    28s
  23   7.39463737e+02  7.39446677e+02  0.00e+00 1.02e-05  7.40e-06    29s
  24   7.39434974e+02  7.39421214e+02  0.00e+00 2.22e-06  2.50e-06    30s
  25   7.39422567e+02  7.39417684e+02  0.00e+00 1.02e-06  1.02e-06    31s
  26   7.39417334e+02  7.39415668e+02  2.02e-07 2.72e-07  3.05e-07    32s
  27   7.39415234e+02  7.39415191e+02  1.43e-08 8.48e-08  5.30e-08    33s
  28   7.39415042e+02  7.39415012e+02  8.10e-09 2.77e-09  4.24e-09    34s
  29   7.39415042e+02  7.39415012e+02  4.57e-08 2.51e-09  4.12e-09    35s
  30   7.39415040e+02  7.39415008e+02  7.37e-08 5.17e-13  2.84e-09    37s
  31   7.39415012e+02  7.39415008e+02  1.35e-06 4.37e-13  2.84e-12    38s
  32   7.39415007e+02  7.39415008e+02  3.81e-07 2.70e-13  1.44e-15    38s
  33   7.39415007e+02  7.39415008e+02  3.57e-07 1.17e-13  6.82e-18    39s
  34   7.39415008e+02  7.39415008e+02  4.32e-07 1.05e-13  5.64e-19    40s

Barrier solved model in 34 iterations and 39.69 seconds (16.39 work units)
Optimal objective 7.39415042e+02

Optimization finished!
Restarting optimization for throughput iteration 1...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5810 rows, 2726 columns and 15838060 nonzeros
Model fingerprint: 0xd5a35c8c
Coefficient statistics:
  Matrix range     [8e-12, 5e-04]
  Objective range  [2e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [3e-06, 3e-06]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 7.16s
Presolved: 2726 rows, 8536 columns, 15840786 nonzeros
Ordering time: 0.07s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.37812172e+03  0.00000000e+00  0.00e+00 0.00e+00  9.40e-01    11s
   1   2.52820092e+03  5.22988121e+02  0.00e+00 1.97e-01  3.70e-01    11s
   2   1.43645581e+03  8.02577469e+02  0.00e+00 1.19e-01  1.85e-01    12s
   3   1.05062143e+03  8.25832596e+02  0.00e+00 7.24e-02  1.03e-01    13s
   4   8.68619007e+02  7.92184717e+02  0.00e+00 4.48e-02  5.96e-02    15s
   5   8.12347074e+02  7.72823712e+02  0.00e+00 3.64e-02  4.60e-02    15s
   6   7.63804168e+02  7.46742380e+02  0.00e+00 2.48e-02  3.01e-02    16s
   7   7.32776124e+02  7.31206738e+02  0.00e+00 1.86e-02  2.10e-02    17s
   8   7.17185148e+02  7.16887501e+02  0.00e+00 1.34e-02  1.43e-02    18s
   9   7.12724950e+02  7.11801287e+02  0.00e+00 1.17e-02  1.22e-02    19s
  10   7.02129518e+02  7.04328188e+02  0.00e+00 9.19e-03  8.69e-03    19s
  11   6.96227993e+02  6.96432753e+02  0.00e+00 6.54e-03  5.94e-03    20s
  12   6.89599225e+02  6.87551681e+02  0.00e+00 3.63e-03  3.23e-03    21s
  13   6.85781547e+02  6.83675928e+02  0.00e+00 2.42e-03  2.09e-03    22s
  14   6.84504378e+02  6.80454721e+02  0.00e+00 1.46e-03  1.49e-03    22s
  15   6.80933569e+02  6.78936782e+02  0.00e+00 1.07e-03  9.60e-04    23s
  16   6.78462502e+02  6.77230767e+02  0.00e+00 5.86e-04  5.22e-04    24s
  17   6.76989197e+02  6.76236478e+02  0.00e+00 3.27e-04  2.93e-04    25s
  18   6.75961096e+02  6.75406067e+02  0.00e+00 1.28e-04  1.34e-04    25s
  19   6.75558159e+02  6.75164454e+02  0.00e+00 6.48e-05  7.86e-05    26s
  20   6.75271652e+02  6.75028203e+02  0.00e+00 3.13e-05  4.26e-05    27s
  21   6.75115284e+02  6.74942893e+02  0.00e+00 1.03e-05  2.22e-05    28s
  22   6.75016609e+02  6.74923686e+02  0.00e+00 5.12e-06  1.17e-05    28s
  23   6.74954663e+02  6.74912730e+02  0.00e+00 2.05e-06  5.11e-06    29s
  24   6.74938567e+02  6.74907581e+02  0.00e+00 5.07e-07  3.09e-06    30s
  25   6.74912112e+02  6.74906536e+02  0.00e+00 1.83e-07  6.19e-07    31s
  26   6.74908264e+02  6.74906015e+02  0.00e+00 1.28e-08  2.08e-07    33s
  27   6.74908262e+02  6.74906018e+02  0.00e+00 1.16e-08  2.07e-07    34s
  28   6.74908253e+02  6.74906034e+02  1.19e-08 5.81e-10  1.97e-07    35s
  29   6.74908252e+02  6.74906035e+02  7.13e-08 4.80e-10  1.97e-07    36s
  30   6.74908245e+02  6.74906040e+02  5.74e-08 1.83e-10  1.96e-07    37s
  31   6.74908242e+02  6.74906032e+02  2.00e-07 6.77e-11  1.96e-07    39s
  32   6.74908240e+02  6.74906035e+02  1.71e-07 4.99e-11  1.96e-07    40s
  33   6.74908227e+02  6.74906040e+02  2.86e-07 1.60e-11  1.94e-07    41s
  34   6.74908222e+02  6.74906041e+02  5.28e-07 1.07e-11  1.93e-07    43s
  35   6.74908178e+02  6.74906041e+02  9.53e-07 9.37e-13  1.89e-07    44s
  36   6.74907970e+02  6.74906043e+02  1.40e-06 2.56e-13  1.71e-07    45s
  37   6.74907962e+02  6.74906043e+02  1.60e-06 2.29e-13  1.70e-07    46s
  38   6.74907909e+02  6.74906043e+02  2.96e-06 2.01e-13  1.66e-07    47s
  39   6.74907724e+02  6.74906039e+02  4.38e-06 8.01e-13  1.51e-07    49s
  40   6.74907525e+02  6.74906037e+02  3.69e-06 3.63e-13  1.35e-07    50s
  41   6.74907392e+02  6.74906040e+02  5.69e-06 2.57e-13  1.25e-07    51s
  42   6.74907247e+02  6.74906040e+02  9.27e-06 2.64e-13  1.12e-07    52s
  43   6.74906884e+02  6.74906041e+02  6.46e-06 2.34e-13  7.70e-08    54s
  44   6.74906595e+02  6.74906042e+02  9.04e-06 3.26e-13  4.45e-08    55s
  45   6.74906619e+02  6.74906042e+02  1.03e-05 5.46e-13  4.44e-08    56s
  46   6.74906587e+02  6.74906029e+02  1.19e-05 2.78e-13  3.70e-08    57s
  47   6.74906020e+02  6.74906039e+02  1.75e-05 4.20e-13  1.88e-09    59s
  48   6.74906102e+02  6.74906043e+02  1.67e-05 3.70e-13  1.18e-09    60s
  49   6.74906087e+02  6.74906045e+02  1.47e-05 2.68e-13  9.13e-10    62s
  50   6.74905947e+02  6.74906045e+02  1.92e-05 2.61e-13  5.55e-10    63s
  51   6.74905828e+02  6.74906045e+02  3.18e-05 2.92e-13  1.33e-10    65s
  52   6.74905842e+02  6.74906045e+02  3.12e-05 2.83e-13  1.28e-10    66s
  53   6.74906100e+02  6.74906045e+02  2.14e-05 5.73e-13  5.52e-11    67s

Barrier performed 53 iterations in 67.35 seconds (34.63 work units)
Sub-optimal termination - objective 6.74908253e+02

/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM35_IWA34/drivers/04_USORT_N128_FPM350M0150_IWA0340_OWA01400_C10_BW15_Nlam5_LS_IDc_ID0_OD_OD0_ls_90_ovsamp16_.py:102: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  dark_zone_mask = circular_aperture(img_owa * 2)(focal_grid) - circular_aperture(img_iwa * 2)(focal_grid)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM35_IWA34/drivers/04_USORT_N128_FPM350M0150_IWA0340_OWA01400_C10_BW15_Nlam5_LS_IDc_ID0_OD_OD0_ls_90_ovsamp16_.py:110: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  focal_plane_mask = 1 - evaluate_supersampled(circular_aperture(2 * fpm_radius), focal_mask_grid, 8)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM35_IWA34/drivers/04_USORT_N128_FPM350M0150_IWA0340_OWA01400_C10_BW15_Nlam5_LS_IDc_ID0_OD_OD0_ls_90_ovsamp16_.py:118: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  field_stop = circular_aperture(2 * field_stop_radius)(field_stop_grid)
WARNING: VerifyWarning: Keyword name 'LS_ALIGN_TOl' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'LS_NUM_STOPS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_START' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_EDGE' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ITER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ESTIM' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'MAX_THRPT' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_THRDS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_XOVER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
Optimization finished!
