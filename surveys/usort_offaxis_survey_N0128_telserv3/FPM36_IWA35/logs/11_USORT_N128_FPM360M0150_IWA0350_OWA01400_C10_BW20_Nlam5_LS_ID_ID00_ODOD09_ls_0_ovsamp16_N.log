Optimizer called with the following parameters:
{'focal_plane_mask': {'field_stop_radius': 14.5,
                      'grayscale': True,
                      'num_pix': 150,
                      'radius': 3.6},
 'image': {'bandwidth': 0.2,
           'contrast': 10,
           'iwa': 3.5,
           'num_wavelengths': 5,
           'owa': 14.0,
           'resolution': 2},
 'instrument': {'inst_name': 'USORT'},
 'lyot_stop': {'alignment_tolerance': 0,
               'filename': 'USORT/LS_USORT_hex_ID0000_OD0990_ovsamp16_N0128.fits',
               'num_lyot_stops': 1},
 'method': {'edge_width_for_prior': 2,
            'ending_scale': 1,
            'force_no_hermitian_symmetry': False,
            'force_no_x_mirror_symmetry': False,
            'force_no_y_mirror_symmetry': False,
            'initial_throughput_estimate': 1,
            'maximize_planet_throughput': True,
            'num_throughput_iterations': 2,
            'starting_scale': 1},
 'pupil': {'N': 128,
           'filename': 'USORT/TelAp_USORT_offaxis_ovsamp16_N0128.fits'},
 'solver': {'crossover': 0,
            'method': 2,
            'num_threads': 0}}

File organization:
{'analysis_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/analysis',
 'drivers_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/drivers',
 'input_files_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/masks',
 'log_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/logs',
 'solution_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/solutions',
 'survey_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35'}

Telescope pupil:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Lyot stop #0:
   Mirror symmetry in x: yes
Lyot stop #0:
   Mirror symmetry in y: yes

Complete APLC:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Starting optimization at scale 1 with 2726 variables and 2895 constraints.
Creating model...
Set parameter Username
Academic license - for non-commercial use only - expires 2024-10-25
Set parameter Crossover to value 0
Set parameter Method to value 2
Calculating and adding constraints...
Wavelength 1/5; Variable 1000/2726
Wavelength 1/5; Variable 2000/2726
Wavelength 2/5; Variable 1000/2726
Wavelength 2/5; Variable 2000/2726
Wavelength 3/5; Variable 1000/2726
Wavelength 3/5; Variable 2000/2726
Wavelength 4/5; Variable 1000/2726
Wavelength 4/5; Variable 2000/2726
Wavelength 5/5; Variable 1000/2726
Wavelength 5/5; Variable 2000/2726
Start optimization...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5790 rows, 2726 columns and 15783540 nonzeros
Model fingerprint: 0xa206def3
Coefficient statistics:
  Matrix range     [2e-12, 5e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e-05, 1e-05]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 7.00s
Presolved: 2726 rows, 8516 columns, 15786266 nonzeros
Error: invalid user locale; possible fix is to set the system environment
       variable 'LC_ALL' to a valid locale (e.g., to 'C')
Ordering time: 0.07s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.58761824e+03  0.00000000e+00  0.00e+00 0.00e+00  9.73e-01    10s
   1   2.85555683e+03  3.66995368e+02  0.00e+00 2.37e-01  4.51e-01    11s
   2   1.62997693e+03  7.83520027e+02  0.00e+00 1.30e-01  2.02e-01    12s
   3   1.19424512e+03  8.66059501e+02  0.00e+00 7.90e-02  1.09e-01    13s
   4   9.61580247e+02  8.30648419e+02  0.00e+00 5.29e-02  6.47e-02    14s
   5   8.64923754e+02  7.92953258e+02  0.00e+00 3.24e-02  3.68e-02    15s
   6   8.13237739e+02  7.78271024e+02  0.00e+00 2.50e-02  2.43e-02    16s
   7   7.89346768e+02  7.61658334e+02  0.00e+00 1.65e-02  1.58e-02    16s
   8   7.66586362e+02  7.48419372e+02  0.00e+00 1.03e-02  9.33e-03    17s
   9   7.57529241e+02  7.40105985e+02  0.00e+00 7.05e-03  6.59e-03    18s
  10   7.47763239e+02  7.34672166e+02  0.00e+00 5.07e-03  4.61e-03    19s
  11   7.39054285e+02  7.30975213e+02  0.00e+00 3.65e-03  3.08e-03    19s
  12   7.30347352e+02  7.27043456e+02  0.00e+00 2.22e-03  1.65e-03    20s
  13   7.25798513e+02  7.24600244e+02  0.00e+00 1.34e-03  8.97e-04    21s
  14   7.23894978e+02  7.23133927e+02  0.00e+00 8.83e-04  5.80e-04    22s
  15   7.22458885e+02  7.21787722e+02  0.00e+00 4.41e-04  3.13e-04    23s
  16   7.21587431e+02  7.21165942e+02  0.00e+00 2.48e-04  1.79e-04    23s
  17   7.21082540e+02  7.20783873e+02  0.00e+00 1.30e-04  1.00e-04    24s
  18   7.20724230e+02  7.20538290e+02  0.00e+00 5.16e-05  4.58e-05    25s
  19   7.20588797e+02  7.20438466e+02  0.00e+00 2.20e-05  2.58e-05    25s
  20   7.20469375e+02  7.20388728e+02  0.00e+00 6.14e-06  1.06e-05    26s
  21   7.20437157e+02  7.20376516e+02  0.00e+00 1.95e-06  6.50e-06    27s
  22   7.20399092e+02  7.20373755e+02  0.00e+00 8.85e-07  2.76e-06    28s
  23   7.20380768e+02  7.20372093e+02  0.00e+00 2.72e-07  9.26e-07    29s
  24   7.20373238e+02  7.20371630e+02  0.00e+00 4.47e-08  1.69e-07    31s
  25   7.20373234e+02  7.20371628e+02  0.00e+00 3.65e-08  1.64e-07    32s
  26   7.20373210e+02  7.20371608e+02  0.00e+00 1.91e-09  1.44e-07    33s
  27   7.20373202e+02  7.20371616e+02  2.74e-08 5.32e-10  1.41e-07    34s
  28   7.20373200e+02  7.20371617e+02  7.31e-08 5.12e-10  1.41e-07    35s
  29   7.20373180e+02  7.20371615e+02  1.94e-07 5.18e-13  1.39e-07    36s
  30   7.20373179e+02  7.20371616e+02  1.42e-07 4.41e-13  1.39e-07    38s
  31   7.20373171e+02  7.20371617e+02  3.09e-07 3.65e-13  1.38e-07    39s
  32   7.20373165e+02  7.20371617e+02  2.92e-07 3.45e-13  1.38e-07    40s
  33   7.20373134e+02  7.20371619e+02  3.92e-07 2.81e-13  1.35e-07    41s
  34   7.20372927e+02  7.20371616e+02  6.94e-07 3.32e-13  1.17e-07    42s
  35   7.20372913e+02  7.20371617e+02  7.53e-07 2.62e-13  1.16e-07    43s
  36   7.20372771e+02  7.20371621e+02  1.40e-06 2.77e-13  1.02e-07    45s
  37   7.20372482e+02  7.20371622e+02  1.63e-06 3.03e-13  7.58e-08    46s
  38   7.20371619e+02  7.20371622e+02  6.21e-06 2.35e-13  1.24e-09    47s
  39   7.20371641e+02  7.20371622e+02  7.55e-06 2.29e-13  8.37e-12    48s
  40   7.20371770e+02  7.20371622e+02  2.45e-05 2.81e-13  8.37e-12    49s
  41   7.20371679e+02  7.20371622e+02  1.73e-05 4.01e-13  3.23e-12    49s
  42   7.20371618e+02  7.20371622e+02  2.31e-05 4.41e-13  1.79e-12    50s
  43   7.20371642e+02  7.20371622e+02  1.17e-05 3.66e-13  1.18e-13    51s
  44   7.20371609e+02  7.20371622e+02  7.17e-06 3.90e-13  2.52e-15    51s
  45   7.20371643e+02  7.20371622e+02  6.34e-06 2.70e-13  9.89e-17    52s
  46   7.20371623e+02  7.20371622e+02  4.50e-06 8.89e-14  7.05e-18    52s
  47   7.20371626e+02  7.20371622e+02  5.66e-06 9.88e-14  9.80e-19    53s
  48   7.20371700e+02  7.20371622e+02  1.14e-05 7.87e-14  5.63e-19    55s
  49   7.20371674e+02  7.20371622e+02  6.10e-06 9.31e-14  1.82e-19    55s
  50   7.20371622e+02  7.20371622e+02  7.44e-06 6.31e-14  1.57e-17    56s

Barrier performed 50 iterations in 55.97 seconds (27.04 work units)
Sub-optimal termination - objective 7.20373210e+02

Optimization finished!
Restarting optimization for throughput iteration 1...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5790 rows, 2726 columns and 15783540 nonzeros
Model fingerprint: 0xf8e663e9
Coefficient statistics:
  Matrix range     [2e-12, 5e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [3e-06, 3e-06]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 7.01s
Presolved: 2726 rows, 8516 columns, 15786266 nonzeros
Ordering time: 0.07s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.50329895e+03  0.00000000e+00  0.00e+00 0.00e+00  9.63e-01    10s
   1   2.78782338e+03  4.16509944e+02  0.00e+00 2.40e-01  4.51e-01    11s
   2   1.52044952e+03  7.72592644e+02  0.00e+00 1.27e-01  2.02e-01    12s
   3   1.17339873e+03  8.06198048e+02  0.00e+00 7.73e-02  1.21e-01    13s
   4   9.86658007e+02  7.84802987e+02  0.00e+00 4.85e-02  7.46e-02    14s
   5   8.45457396e+02  7.64006740e+02  0.00e+00 3.81e-02  5.22e-02    14s
   6   7.59569594e+02  7.44930699e+02  0.00e+00 2.88e-02  3.51e-02    15s
   7   7.35900257e+02  7.13957208e+02  0.00e+00 1.64e-02  2.10e-02    16s
   8   7.17959465e+02  7.01878488e+02  0.00e+00 1.23e-02  1.53e-02    16s
   9   7.05814924e+02  6.93375536e+02  0.00e+00 9.59e-03  1.17e-02    17s
  10   6.94082843e+02  6.85597026e+02  0.00e+00 7.30e-03  8.49e-03    18s
  11   6.82947565e+02  6.79644724e+02  0.00e+00 5.67e-03  5.96e-03    19s
  12   6.75821462e+02  6.73809151e+02  0.00e+00 4.11e-03  4.10e-03    19s
  13   6.73340361e+02  6.71914485e+02  0.00e+00 3.64e-03  3.53e-03    20s
  14   6.69505308e+02  6.69214411e+02  0.00e+00 2.96e-03  2.71e-03    21s
  15   6.64965611e+02  6.64731025e+02  0.00e+00 1.93e-03  1.71e-03    21s
  16   6.61846153e+02  6.61601747e+02  0.00e+00 1.30e-03  1.12e-03    22s
  17   6.59457423e+02  6.59606567e+02  0.00e+00 9.20e-04  7.54e-04    23s
  18   6.57629177e+02  6.57887502e+02  0.00e+00 6.12e-04  4.89e-04    24s
  19   6.56549279e+02  6.57048531e+02  0.00e+00 4.60e-04  3.44e-04    24s
  20   6.56050662e+02  6.56432156e+02  0.00e+00 3.56e-04  2.68e-04    25s
  21   6.55455871e+02  6.55747490e+02  0.00e+00 2.37e-04  1.78e-04    26s
  22   6.55377584e+02  6.55552418e+02  0.00e+00 2.03e-04  1.60e-04    26s
  23   6.55064302e+02  6.55115206e+02  0.00e+00 1.31e-04  1.11e-04    27s
  24   6.54736941e+02  6.54797715e+02  0.00e+00 8.13e-05  6.66e-05    28s
  25   6.54530672e+02  6.54492526e+02  0.00e+00 3.51e-05  3.46e-05    29s
  26   6.54449607e+02  6.54411064e+02  0.00e+00 2.24e-05  2.33e-05    30s
  27   6.54385575e+02  6.54343806e+02  0.00e+00 1.21e-05  1.45e-05    30s
  28   6.54353469e+02  6.54299157e+02  0.00e+00 5.12e-06  9.39e-06    31s
  29   6.54314468e+02  6.54284146e+02  0.00e+00 2.69e-06  5.09e-06    32s
  30   6.54294401e+02  6.54273695e+02  0.00e+00 9.90e-07  2.72e-06    33s
  31   6.54270765e+02  6.54268282e+02  0.00e+00 9.70e-08  3.08e-07    34s
  32   6.54270762e+02  6.54268184e+02  3.20e-08 7.90e-08  3.00e-07    35s
  33   6.54270756e+02  6.54268120e+02  2.37e-07 6.43e-08  2.92e-07    36s
  34   6.54270752e+02  6.54268110e+02  2.33e-07 6.16e-08  2.90e-07    37s
  35   6.54270719e+02  6.54268041e+02  4.07e-07 4.72e-08  2.80e-07    39s
  36   6.54270702e+02  6.54267890e+02  7.55e-07 1.79e-08  2.66e-07    40s
  37   6.54270651e+02  6.54267870e+02  1.44e-06 1.34e-08  2.59e-07    41s
  38   6.54270563e+02  6.54267806e+02  1.77e-06 2.79e-13  2.46e-07    42s
  39   6.54270531e+02  6.54267804e+02  2.32e-06 2.63e-13  2.43e-07    43s
  40   6.54270481e+02  6.54267807e+02  2.68e-06 3.29e-13  2.39e-07    44s
  41   6.54270481e+02  6.54267807e+02  3.20e-06 3.21e-13  2.39e-07    45s
  42   6.54270400e+02  6.54267754e+02  5.13e-06 2.65e-13  2.37e-07    47s
  43   6.54270269e+02  6.54267793e+02  7.21e-06 3.91e-13  2.21e-07    48s
  44   6.54270215e+02  6.54267804e+02  9.54e-06 3.66e-13  2.12e-07    49s
  45   6.54269997e+02  6.54267803e+02  1.22e-05 3.01e-13  1.99e-07    50s
  46   6.54269905e+02  6.54267803e+02  1.59e-05 2.30e-13  1.95e-07    51s
  47   6.54269073e+02  6.54267806e+02  2.96e-05 2.53e-13  1.15e-07    52s
  48   6.54268829e+02  6.54267805e+02  3.75e-05 3.43e-13  8.99e-08    53s
  49   6.54268387e+02  6.54267807e+02  5.75e-05 2.92e-13  6.80e-08    54s
  50   6.54268966e+02  6.54267809e+02  7.49e-05 2.20e-13  4.94e-08    55s
  51   6.54268923e+02  6.54267809e+02  7.94e-05 2.16e-13  4.36e-08    56s
  52   6.54268130e+02  6.54267810e+02  7.28e-05 3.09e-13  1.95e-08    57s
  53   6.54267919e+02  6.54267813e+02  7.70e-05 9.48e-13  1.51e-08    58s
  54   6.54267853e+02  6.54267814e+02  1.02e-04 4.74e-13  7.33e-09    60s
  55   6.54268223e+02  6.54267810e+02  6.18e-05 3.17e-13  1.54e-09    62s
  56   6.54268223e+02  6.54267810e+02  5.95e-05 4.21e-13  1.52e-09    63s
  57   6.54267794e+02  6.54267809e+02  9.63e-05 3.62e-13  8.77e-10    64s
  58   6.54267691e+02  6.54267809e+02  1.32e-04 9.75e-13  5.97e-10    65s
  59   6.54267522e+02  6.54267809e+02  1.03e-04 3.90e-13  3.90e-10    66s
  60   6.54267151e+02  6.54267808e+02  1.91e-04 3.93e-13  3.90e-10    68s
  61   6.54267426e+02  6.54267809e+02  9.71e-05 5.03e-13  1.82e-10    68s
  62   6.54267911e+02  6.54267809e+02  7.06e-05 2.50e-13  1.10e-10    70s
  63   6.54268002e+02  6.54267808e+02  6.91e-05 2.81e-13  9.33e-11    71s
  64   6.54268003e+02  6.54267808e+02  8.24e-05 2.79e-13  7.36e-11    73s
  65   6.54268011e+02  6.54267808e+02  7.19e-05 2.70e-13  5.55e-11    75s
  66   6.54268032e+02  6.54267808e+02  1.17e-04 3.02e-13  5.37e-11    76s

Barrier performed 66 iterations in 76.03 seconds (41.38 work units)
Sub-optimal termination - objective 6.54270756e+02

/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/drivers/11_USORT_N128_FPM360M0150_IWA0350_OWA01400_C10_BW20_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:102: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  dark_zone_mask = circular_aperture(img_owa * 2)(focal_grid) - circular_aperture(img_iwa * 2)(focal_grid)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/drivers/11_USORT_N128_FPM360M0150_IWA0350_OWA01400_C10_BW20_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:110: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  focal_plane_mask = 1 - evaluate_supersampled(circular_aperture(2 * fpm_radius), focal_mask_grid, 8)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/drivers/11_USORT_N128_FPM360M0150_IWA0350_OWA01400_C10_BW20_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:118: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  field_stop = circular_aperture(2 * field_stop_radius)(field_stop_grid)
WARNING: VerifyWarning: Keyword name 'LS_ALIGN_TOl' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'LS_NUM_STOPS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_START' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_EDGE' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ITER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ESTIM' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'MAX_THRPT' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_THRDS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_XOVER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
Optimization finished!
