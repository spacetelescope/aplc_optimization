Optimizer called with the following parameters:
{'focal_plane_mask': {'field_stop_radius': 14.5,
                      'grayscale': True,
                      'num_pix': 150,
                      'radius': 3.6},
 'image': {'bandwidth': 0.15,
           'contrast': 10,
           'iwa': 3.5,
           'num_wavelengths': 5,
           'owa': 14.0,
           'resolution': 2},
 'instrument': {'inst_name': 'USORT'},
 'lyot_stop': {'alignment_tolerance': 0,
               'filename': 'USORT/LS_USORT_hex_ID0000_OD0990_ovsamp16_N0128.fits',
               'num_lyot_stops': 1},
 'method': {'edge_width_for_prior': 2,
            'ending_scale': 1,
            'force_no_hermitian_symmetry': False,
            'force_no_x_mirror_symmetry': False,
            'force_no_y_mirror_symmetry': False,
            'initial_throughput_estimate': 1,
            'maximize_planet_throughput': True,
            'num_throughput_iterations': 2,
            'starting_scale': 1},
 'pupil': {'N': 128,
           'filename': 'USORT/TelAp_USORT_offaxis_ovsamp16_N0128.fits'},
 'solver': {'crossover': 0,
            'method': 2,
            'num_threads': 0}}

File organization:
{'analysis_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/analysis',
 'drivers_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/drivers',
 'input_files_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/masks',
 'log_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/logs',
 'solution_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/solutions',
 'survey_dir': '/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35'}

Telescope pupil:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Lyot stop #0:
   Mirror symmetry in x: yes
Lyot stop #0:
   Mirror symmetry in y: yes

Complete APLC:
   Mirror symmetry in x: yes
   Mirror symmetry in y: yes

Starting optimization at scale 1 with 2726 variables and 2895 constraints.
Creating model...
Set parameter Username
Academic license - for non-commercial use only - expires 2024-10-25
Set parameter Crossover to value 0
Set parameter Method to value 2
Calculating and adding constraints...
Wavelength 1/5; Variable 1000/2726
Wavelength 1/5; Variable 2000/2726
Wavelength 2/5; Variable 1000/2726
Wavelength 2/5; Variable 2000/2726
Wavelength 3/5; Variable 1000/2726
Wavelength 3/5; Variable 2000/2726
Wavelength 4/5; Variable 1000/2726
Wavelength 4/5; Variable 2000/2726
Wavelength 5/5; Variable 1000/2726
Wavelength 5/5; Variable 2000/2726
Start optimization...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5790 rows, 2726 columns and 15783540 nonzeros
Model fingerprint: 0x02313030
Coefficient statistics:
  Matrix range     [4e-12, 6e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e-05, 1e-05]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 7.25s
Presolved: 2726 rows, 8516 columns, 15786266 nonzeros
Error: invalid user locale; possible fix is to set the system environment
       variable 'LC_ALL' to a valid locale (e.g., to 'C')
Ordering time: 0.07s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.52837327e+03  0.00000000e+00  0.00e+00 0.00e+00  9.61e-01    11s
   1   2.59751549e+03  4.66395461e+02  0.00e+00 2.00e-01  3.73e-01    11s
   2   1.73415957e+03  8.17372219e+02  0.00e+00 1.25e-01  1.99e-01    12s
   3   1.29859292e+03  9.35772702e+02  0.00e+00 7.82e-02  1.09e-01    13s
   4   1.09141705e+03  9.31932074e+02  0.00e+00 5.88e-02  7.55e-02    14s
   5   9.78913972e+02  9.11343282e+02  0.00e+00 4.70e-02  5.58e-02    15s
   6   9.12297840e+02  8.74414295e+02  0.00e+00 3.27e-02  3.76e-02    15s
   7   8.52470981e+02  8.42503109e+02  0.00e+00 2.26e-02  2.35e-02    16s
   8   8.19774274e+02  8.22692063e+02  0.00e+00 1.66e-02  1.51e-02    17s
   9   8.05417878e+02  8.07672228e+02  0.00e+00 1.22e-02  1.06e-02    18s
  10   7.93481269e+02  7.97270856e+02  0.00e+00 9.16e-03  7.33e-03    19s
  11   7.85032160e+02  7.86879633e+02  0.00e+00 6.05e-03  4.69e-03    19s
  12   7.77792229e+02  7.83625327e+02  0.00e+00 5.04e-03  3.45e-03    20s
  13   7.72234466e+02  7.78007369e+02  0.00e+00 3.67e-03  2.35e-03    21s
  14   7.69802177e+02  7.72835863e+02  0.00e+00 2.54e-03  1.70e-03    21s
  15   7.66641690e+02  7.69367773e+02  0.00e+00 1.78e-03  1.13e-03    22s
  16   7.65183980e+02  7.66937099e+02  0.00e+00 1.26e-03  8.16e-04    23s
  17   7.63178202e+02  7.65224967e+02  0.00e+00 9.30e-04  5.32e-04    24s
  18   7.61559416e+02  7.62540083e+02  0.00e+00 4.17e-04  2.30e-04    24s
  19   7.60929302e+02  7.61474272e+02  0.00e+00 2.09e-04  1.10e-04    25s
  20   7.60688794e+02  7.61033320e+02  0.00e+00 1.23e-04  6.23e-05    26s
  21   7.60537283e+02  7.60681331e+02  0.00e+00 5.39e-05  2.80e-05    26s
  22   7.60462380e+02  7.60573697e+02  0.00e+00 3.29e-05  1.50e-05    27s
  23   7.60426792e+02  7.60460796e+02  0.00e+00 1.06e-05  4.97e-06    28s
  24   7.60419650e+02  7.60422580e+02  0.00e+00 2.92e-06  1.95e-06    28s
  25   7.60410697e+02  7.60413140e+02  9.62e-08 9.77e-07  5.23e-07    29s
  26   7.60409648e+02  7.60409357e+02  7.22e-07 1.67e-07  1.52e-07    30s
  27   7.60408762e+02  7.60408701e+02  2.07e-06 2.34e-08  2.28e-08    30s
  28   7.60408567e+02  7.60408622e+02  1.58e-05 5.50e-09  6.17e-09    31s
  29   7.60408587e+02  7.60408622e+02  1.50e-05 5.47e-09  6.11e-09    32s
  30   7.60408595e+02  7.60408601e+02  4.34e-06 6.32e-10  1.38e-09    34s
  31   7.60408588e+02  7.60408600e+02  6.43e-06 2.29e-10  1.18e-09    35s
  32   7.60408655e+02  7.60408600e+02  5.52e-06 2.11e-10  2.01e-10    36s
  33   7.60408597e+02  7.60408599e+02  3.45e-06 8.12e-11  8.31e-11    39s
  34   7.60408589e+02  7.60408599e+02  8.48e-06 5.57e-11  6.23e-11    40s
  35   7.60408637e+02  7.60408599e+02  4.99e-06 2.65e-12  1.62e-11    42s
  36   7.60408636e+02  7.60408599e+02  7.68e-06 3.68e-13  2.66e-14    43s
  37   7.60408599e+02  7.60408599e+02  6.40e-06 4.13e-13  1.17e-16    44s
  38   7.60408473e+02  7.60408599e+02  3.27e-05 1.72e-12  5.69e-16    44s
  39   7.60408449e+02  7.60408599e+02  3.72e-05 1.80e-12  1.80e-12    48s
  40   7.60408498e+02  7.60408599e+02  2.00e-05 4.91e-13  4.94e-12    51s
  41   7.60408530e+02  7.60408599e+02  1.79e-05 7.85e-13  7.94e-12    53s
  42   7.60408662e+02  7.60408599e+02  2.52e-05 3.89e-13  6.23e-12    54s
  43   7.60408637e+02  7.60408599e+02  1.04e-05 3.38e-13  5.59e-13    55s
  44   7.60408605e+02  7.60408599e+02  2.08e-05 4.05e-13  5.59e-13    56s
  45   7.60408506e+02  7.60408599e+02  3.73e-05 3.04e-13  1.11e-13    58s
  46   7.60408494e+02  7.60408599e+02  1.91e-05 3.15e-13  5.73e-14    59s
  47   7.60408867e+02  7.60408599e+02  1.77e-05 3.26e-13  8.58e-14    59s
  48   7.60408962e+02  7.60408599e+02  2.83e-05 8.54e-13  1.52e-13    60s
  49   7.60408468e+02  7.60408599e+02  1.24e-05 3.60e-13  7.40e-15    61s
  50   7.60408677e+02  7.60408598e+02  1.64e-05 3.62e-13  8.12e-15    62s
  51   7.60408633e+02  7.60408598e+02  1.03e-05 2.01e-13  2.46e-13    63s

Barrier performed 51 iterations in 62.60 seconds (32.39 work units)
Sub-optimal termination - objective 7.60409648e+02

Optimization finished!
Restarting optimization for throughput iteration 1...
Gurobi Optimizer version 10.0.3 build v10.0.3rc0 (linux64)

CPU model: Intel(R) Xeon(R) Gold 6146 CPU @ 3.20GHz, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 24 physical cores, 48 logical processors, using up to 24 threads

Optimize a model with 5790 rows, 2726 columns and 15783540 nonzeros
Model fingerprint: 0xbe9eec0c
Coefficient statistics:
  Matrix range     [4e-12, 6e-04]
  Objective range  [4e-03, 1e+00]
  Bounds range     [1e+00, 1e+00]
  RHS range        [4e-06, 4e-06]
Presolve removed 0 rows and 0 columns (presolve time = 6s) ...
Presolve time: 6.88s
Presolved: 2726 rows, 8516 columns, 15786266 nonzeros
Ordering time: 0.07s

Barrier statistics:
 AA' NZ     : 3.714e+06
 Factor NZ  : 3.717e+06 (roughly 34 MB of memory)
 Factor Ops : 6.756e+09 (less than 1 second per iteration)
 Threads    : 24

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   5.44706929e+03  0.00000000e+00  0.00e+00 0.00e+00  9.52e-01    10s
   1   2.53055121e+03  4.49635293e+02  0.00e+00 2.05e-01  3.80e-01    11s
   2   1.62411233e+03  7.96267482e+02  0.00e+00 1.28e-01  2.03e-01    12s
   3   1.27001758e+03  8.91825314e+02  0.00e+00 8.43e-02  1.27e-01    13s
   4   1.04326968e+03  9.01282781e+02  0.00e+00 5.82e-02  8.28e-02    14s
   5   9.71791736e+02  8.54155951e+02  0.00e+00 4.23e-02  6.30e-02    14s
   6   8.42715679e+02  8.24067064e+02  0.00e+00 3.41e-02  4.52e-02    15s
   7   7.73604507e+02  7.86219403e+02  0.00e+00 2.38e-02  2.92e-02    16s
   8   7.48515402e+02  7.75347297e+02  0.00e+00 2.13e-02  2.40e-02    17s
   9   7.37474185e+02  7.61616935e+02  0.00e+00 1.79e-02  2.00e-02    17s
  10   7.27310081e+02  7.38765733e+02  0.00e+00 1.26e-02  1.46e-02    18s
  11   7.12018632e+02  7.25096816e+02  0.00e+00 9.65e-03  1.01e-02    19s
  12   7.00494389e+02  7.07946588e+02  0.00e+00 6.05e-03  5.99e-03    20s
  13   6.95866319e+02  6.97764026e+02  0.00e+00 4.09e-03  4.21e-03    20s
  14   6.90680466e+02  6.91126193e+02  0.00e+00 2.84e-03  2.89e-03    21s
  15   6.86412197e+02  6.86132681e+02  0.00e+00 1.95e-03  1.97e-03    22s
  16   6.84960110e+02  6.83286903e+02  0.00e+00 1.46e-03  1.59e-03    22s
  17   6.80843323e+02  6.81436598e+02  0.00e+00 1.14e-03  1.03e-03    23s
  18   6.80089944e+02  6.81181726e+02  0.00e+00 1.09e-03  9.35e-04    24s
  19   6.78824942e+02  6.80191846e+02  0.00e+00 9.21e-04  7.46e-04    25s
  20   6.77725132e+02  6.78334994e+02  0.00e+00 6.28e-04  5.30e-04    25s
  21   6.76339795e+02  6.77081858e+02  0.00e+00 4.37e-04  3.36e-04    26s
  22   6.75829508e+02  6.76229367e+02  0.00e+00 3.06e-04  2.46e-04    27s
  23   6.74966683e+02  6.75460091e+02  0.00e+00 1.90e-04  1.30e-04    28s
  24   6.74649100e+02  6.74736905e+02  0.00e+00 8.33e-05  6.70e-05    28s
  25   6.74447285e+02  6.74502980e+02  0.00e+00 4.72e-05  3.73e-05    29s
  26   6.74365628e+02  6.74372511e+02  0.00e+00 2.74e-05  2.40e-05    30s
  27   6.74267754e+02  6.74280247e+02  0.00e+00 1.34e-05  1.10e-05    31s
  28   6.74214848e+02  6.74235018e+02  0.00e+00 6.51e-06  4.09e-06    31s
  29   6.74205530e+02  6.74201949e+02  0.00e+00 1.43e-06  1.62e-06    32s
  30   6.74197455e+02  6.74197262e+02  0.00e+00 6.87e-07  6.34e-07    33s
  31   6.74195510e+02  6.74195054e+02  7.20e-08 3.28e-07  3.34e-07    34s
  32   6.74194304e+02  6.74193761e+02  7.88e-08 1.19e-07  1.55e-07    36s
  33   6.74193198e+02  6.74193518e+02  3.40e-08 7.98e-08  4.34e-08    38s
  34   6.74193043e+02  6.74193038e+02  2.62e-08 6.79e-10  1.11e-09    39s

Barrier solved model in 34 iterations and 39.28 seconds (17.54 work units)
Optimal objective 6.74193043e+02

/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/drivers/10_USORT_N128_FPM360M0150_IWA0350_OWA01400_C10_BW15_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:102: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  dark_zone_mask = circular_aperture(img_owa * 2)(focal_grid) - circular_aperture(img_iwa * 2)(focal_grid)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/drivers/10_USORT_N128_FPM360M0150_IWA0350_OWA01400_C10_BW15_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:110: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  focal_plane_mask = 1 - evaluate_supersampled(circular_aperture(2 * fpm_radius), focal_mask_grid, 8)
/user/bnickson/GitHub/LUVex_TelAps/aplc_optimization/surveys/usort_offaxis_survey_N0128_telserv3/FPM36_IWA35/drivers/10_USORT_N128_FPM360M0150_IWA0350_OWA01400_C10_BW15_Nlam5_LS_ID_ID00_ODOD09_ls_0_ovsamp16_N.py:118: DeprecationWarning: circular_aperture is deprecated. Its new name is make_circular_aperture.
  field_stop = circular_aperture(2 * field_stop_radius)(field_stop_grid)
WARNING: VerifyWarning: Keyword name 'LS_ALIGN_TOl' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'LS_NUM_STOPS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_START' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'PROG_EDGE' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ITER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'THRPT_ESTIM' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'MAX_THRPT' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_THRDS' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
WARNING: VerifyWarning: Keyword name 'SLV_XOVER' is greater than 8 characters or contains characters not allowed by the FITS standard; a HIERARCH card will be created. [astropy.io.fits.card]
Optimization finished!
